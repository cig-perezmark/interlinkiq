{"version":3,"sources":["compliance_chart.js"],"names":["document","addEventListener","fetch","response","json","then","data","folderData","length","fileData","error","console","alert","am5","ready","root","Root","_logo","dispose","setThemes","am5themes_Animated","chart","container","children","push","am5xy","XYChart","panX","panY","wheelX","wheelY","pinchZoomX","paddingTop","verticalLayout","layout","color","set","ColorSet","colors","AxisRendererX","template","setAll","xRenderer","minGridDistance","strokeDasharray","forceHidden","grid","location","CategoryAxis","yRenderer","strokeOpacity","xAxis","labels","xAxes","categoryField","renderer","tooltip","Tooltip","yAxis","yAxes","ValueAxis","shadowOpacity","shadowOffsetX","series","ColumnSeries","cornerRadiusTL","cornerRadiusTR","undefined","labelText","columns","tooltipY","shadowOffsetY","adapters","shadowBlur","strokeWidth","stroke","shadowColor","Number","fill","non_expired","create","expired","nearly_expired_30_days","target","get","getIndex","indexOf","chartData","category","value","main_folder_count","nearly_expired_90_days","latest_files_count","nearly_expired_60_days","p50","gridLayout","unshift","Legend","centerX","x","y","percent","handleResize","window","innerWidth","legend","horizontalLayout","dataItems","text","maxWidth","wrap","appear","AxisRendererY","cellEndLocation","minorGridEnabled","maxValue","inversed","cellStartLocation","Math","max","min","pointerOrientation","getFillFromSprite","autoTextColor","Rectangle","p100","valueXField","categoryYField","dataItem","sequencedInterpolation","label","background","fillOpacity","height","add","locationY","bullets","Label","labelInside","labelColor","includes","Bullet","locationX","sprite","centerY","populateText","name","lineY","XYCursor","cursor","lineX","$","ajax","method","dataType","success","valueField","compliantPercentage","am5percent","PieChart","PieSeries","slices","nonCompliantPercentage","slice","each","xhr","dataContext","status","reviewPercentage","endAngle"],"mappings":"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","file":"compliance_chart.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    fetch('AnalyticsIQ/compliance_data.php')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (!data || !data.folderData || !data.folderData.length || !data.fileData) {\r\n                console.error('Invalid data format:', data);\r\n                alert('Received invalid data. Please check the server response.');\r\n                return;\r\n            }\r\n\r\n            am5.ready(function() {\r\n                var root = am5.Root.new(\"comchartdiv\");\r\n\r\n                 // Remove amCharts logo\r\n                 root._logo.dispose();\r\n\r\n                root.setThemes([am5themes_Animated.new(root)]);\r\n              \r\n\r\n                var chart = root.container.children.push(am5xy.XYChart.new(root, {\r\n                    panX: false,\r\n                    panY: false,\r\n                    wheelX: \"none\",\r\n                    wheelY: \"none\",\r\n                    pinchZoomX: false,\r\n                    paddingTop: 50,\r\n                    layout: root.verticalLayout\r\n                }));\r\n\r\n                chart.set(\"colors\", am5.ColorSet.new(root, {\r\n                    colors: [\r\n                        am5.color(0xFFD700),\r\n                        am5.color(0xFFA500),\r\n                        am5.color(0x228B22), // Color for non-expired\r\n                        am5.color(0xFF0000),\r\n                        am5.color(0xEE4B2B),\r\n                        am5.color(0xFF5C5C),\r\n                        am5.color(0xFF8A8A)\r\n                    ]\r\n                }));\r\n\r\n                var xRenderer = am5xy.AxisRendererX.new(root, {\r\n                    minGridDistance: 50,\r\n                    minorGridEnabled: true\r\n                });\r\n\r\n                xRenderer.grid.template.setAll({\r\n                    location: 1,\r\n                    strokeDasharray: [5, 5]\r\n                });\r\n\r\n                var yRenderer = am5xy.AxisRendererY.new(root, {\r\n                    strokeOpacity: 0.1\r\n                });\r\n\r\n                yRenderer.grid.template.setAll({\r\n                    strokeDasharray: [5, 5]\r\n                });\r\n\r\n                xRenderer.labels.template.setAll({\r\n                    forceHidden: true\r\n                });\r\n\r\n                var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {\r\n                    categoryField: \"category\",\r\n                    renderer: xRenderer,\r\n                    tooltip: am5.Tooltip.new(root, {})\r\n                }));\r\n\r\n                var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {\r\n                    min: 0,\r\n                    renderer: yRenderer\r\n                }));\r\n\r\n                var series = chart.series.push(am5xy.ColumnSeries.new(root, {\r\n                    name: \"Series 1\",\r\n                    xAxis: xAxis,\r\n                    yAxis: yAxis,\r\n                    valueYField: \"value\",\r\n                    categoryXField: \"category\",\r\n                    tooltip: am5.Tooltip.new(root, {\r\n                        labelText: \"{category}: {valueY}\"\r\n                    }),\r\n                }));\r\n\r\n                series.columns.template.setAll({\r\n                    tooltipY: 0,\r\n                    tooltipText: \"{category}: {valueY}\",\r\n                    shadowOpacity: 0.1,\r\n                    shadowOffsetX: 2,\r\n                    shadowOffsetY: 2,\r\n                    shadowBlur: 1,\r\n                    strokeWidth: 2,\r\n                    stroke: am5.color(0xffffff),\r\n                    shadowColor: am5.color(0x000000),\r\n                    cornerRadiusTL: 50,\r\n                    cornerRadiusTR: 50,\r\n                    fill: undefined, // Remove gradient fill\r\n                    fillOpacity: 1 // Set the transparency here\r\n                });\r\n\r\n                series.columns.template.states.create(\"hover\", {\r\n                    shadowOpacity: 1,\r\n                    shadowBlur: 10,\r\n                    cornerRadiusTL: 10,\r\n                    cornerRadiusTR: 10\r\n                });\r\n\r\n                series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n                    return chart.get(\"colors\").getIndex(series.columns.indexOf(target));\r\n                });\r\n\r\n                var chartData = [\r\n                    { category: \"Folders\", value: Number(data.folderData[0].main_folder_count) },\r\n                    { category: \"Documents\", value: Number(data.fileData.latest_files_count) },\r\n                    { category: \"Non Expired\", value: Number(data.fileData.non_expired) }, // Add non-expired count\r\n                    { category: \"Expired\", value: Number(data.fileData.expired) },\r\n                    { category: \"Nearly Expired 30 Days\", value: Number(data.fileData.nearly_expired_30_days) },\r\n                    { category: \"Nearly Expired 60 Days\", value: Number(data.fileData.nearly_expired_60_days) },\r\n                    { category: \"Nearly Expired 90 Days\", value: Number(data.fileData.nearly_expired_90_days) }\r\n                ];\r\n\r\n                xAxis.data.setAll(chartData);\r\n                series.data.setAll(chartData);\r\n\r\n                var legend = chart.children.unshift(am5.Legend.new(root, {\r\n                    centerX: am5.p50,\r\n                    x: am5.p50,\r\n                    y: am5.percent(-4),\r\n                    layout: root.gridLayout\r\n                }));\r\n\r\n                legend.data.setAll(series.dataItems);\r\n\r\n                legend.labels.template.setAll({\r\n                    text: \"{category}: {valueY}\",\r\n                    maxWidth: 120,\r\n                    wrap: true,\r\n                    fill: am5.color(0x000000)\r\n                });\r\n\r\n                legend.set(\"width\", am5.percent(100)); // Ensure the legend uses the full width of the chart\r\n                legend.set(\"fixedWidthGrid\", true); // Use a fixed width grid for the legend items\r\n\r\n                series.appear(1000);\r\n                chart.appear(1000, 100);\r\n\r\n                // Handle window resize\r\n                function handleResize() {\r\n                    if (window.innerWidth < 600) {\r\n                        legend.set(\"layout\", root.verticalLayout);\r\n                        legend.set(\"y\", am5.percent(0));\r\n                    } else if (window.innerWidth < 1024) {\r\n                        legend.set(\"layout\", root.horizontalLayout);\r\n                        legend.set(\"y\", am5.percent(2));\r\n                    } else {\r\n                        legend.set(\"layout\", root.gridLayout);\r\n                        legend.set(\"y\", am5.percent(-4));\r\n                    }\r\n                }\r\n\r\n                window.addEventListener('resize', function() {\r\n                    handleResize();\r\n                    chart.appear(0, 0);\r\n                });\r\n\r\n                handleResize(); // Initial call to set the correct layout\r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching data:', error);\r\n            alert('Failed to fetch compliance data. Please try again later.');\r\n        });\r\n});\r\n\r\n\r\n\r\n\r\n//LEFT TO RIGHT ANALYTICS\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    fetch('AnalyticsIQ/compliance_data.php')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (!data || !data.folderData || !data.folderData.length || !data.fileData) {\r\n                console.error('Invalid data format:', data);\r\n                alert('Received invalid data. Please check the server response.');\r\n                return;\r\n            }\r\n\r\n            am5.ready(function() {\r\n                // Create root element\r\n                var root = am5.Root.new(\"comchartdiv1\");\r\n\r\n                // Remove amCharts logo\r\n                root._logo.dispose();\r\n\r\n                // Set themes\r\n                root.setThemes([\r\n                    am5themes_Animated.new(root)\r\n                ]);\r\n\r\n                // Create chart\r\n                var chart = root.container.children.push(am5xy.XYChart.new(root, {\r\n                    panX: false,\r\n                    panY: false,\r\n                    wheelX: \"none\",\r\n                    wheelY: \"none\",\r\n                    pinchZoomX: false,\r\n                    paddingLeft: 0,\r\n                    layout: root.verticalLayout\r\n                }));\r\n\r\n                // Create axes\r\n                var yAxis = chart.yAxes.push(am5xy.CategoryAxis.new(root, {\r\n                    categoryField: \"category\",\r\n                    renderer: am5xy.AxisRendererY.new(root, {\r\n                        inversed: true,\r\n                        cellStartLocation: 0.1,\r\n                        cellEndLocation: 0.9,\r\n                        minorGridEnabled: true\r\n                    })\r\n                }));\r\n\r\n                // Make the y-axis grid lines dashed\r\n                yAxis.get(\"renderer\").grid.template.setAll({\r\n                    strokeDasharray: [4, 4] // Adjust the pattern as needed\r\n                });\r\n\r\n                // Find the maximum value in the dataset\r\n                var maxValue = Math.max(\r\n                    Number(data.folderData[0].main_folder_count),\r\n                    Number(data.fileData.latest_files_count),\r\n                    Number(data.fileData.non_expired),\r\n                    Number(data.fileData.expired),\r\n                    Number(data.fileData.nearly_expired_30_days),\r\n                    Number(data.fileData.nearly_expired_60_days),\r\n                    Number(data.fileData.nearly_expired_90_days)\r\n                );\r\n\r\n                var xAxis = chart.xAxes.push(am5xy.ValueAxis.new(root, {\r\n                    renderer: am5xy.AxisRendererX.new(root, {\r\n                        strokeOpacity: 0.1,\r\n                        minGridDistance: 50\r\n                    }),\r\n                    min: 0,\r\n                    max: maxValue > 100 ? maxValue : 100 // Set max to the greater value between maxValue and 100\r\n                }));\r\n\r\n                // Make the x-axis grid lines dashed\r\n                xAxis.get(\"renderer\").grid.template.setAll({\r\n                    strokeDasharray: [4, 4] // Adjust the pattern as needed\r\n                });\r\n\r\n                // Data\r\n                var chartData = [\r\n                    { category: \"Folders\", value: Number(data.folderData[0].main_folder_count) },\r\n                    { category: \"Documents\", value: Number(data.fileData.latest_files_count) },\r\n                    { category: \"Non Expired\", value: Number(data.fileData.non_expired) === 0 ? 100 : Number(data.fileData.non_expired) },\r\n                    { category: \"Expired\", value: Number(data.fileData.expired) === 0 ? 100 : Number(data.fileData.expired) },\r\n                    { category: \"Nearly Expired 30 Days\", value: Number(data.fileData.nearly_expired_30_days) === 0 ? 100 : Number(data.fileData.nearly_expired_30_days) },\r\n                    { category: \"Nearly Expired 60 Days\", value: Number(data.fileData.nearly_expired_60_days) === 0 ? 100 : Number(data.fileData.nearly_expired_60_days) },\r\n                    { category: \"Nearly Expired 90 Days\", value: Number(data.fileData.nearly_expired_90_days) === 0 ? 100 : Number(data.fileData.nearly_expired_90_days) }\r\n                ];\r\n\r\n                yAxis.data.setAll(chartData);\r\n\r\n                // Add series\r\n                var series = chart.series.push(am5xy.ColumnSeries.new(root, {\r\n                    xAxis: xAxis,\r\n                    yAxis: yAxis,\r\n                    valueXField: \"value\",\r\n                    categoryYField: \"category\",\r\n                    sequencedInterpolation: true,\r\n                    tooltip: am5.Tooltip.new(root, {\r\n                        pointerOrientation: \"horizontal\",\r\n                        getFillFromSprite: false,\r\n                        autoTextColor: false,\r\n                        label: {\r\n                            fill: am5.color(0xFFFFFF)\r\n                        },\r\n                        background: am5.Rectangle.new(root, {\r\n                            fill: am5.color(0x000000),\r\n                            fillOpacity: 0.7\r\n                        })\r\n                    })\r\n                }));\r\n\r\n                series.columns.template.setAll({\r\n                    height: am5.p100,\r\n                    strokeOpacity: 0\r\n                });\r\n\r\n                series.columns.template.adapters.add(\"tooltipText\", function(text, target) {\r\n                    var dataItem = target.dataItem;\r\n                    if (dataItem) {\r\n                        var value = dataItem.get(\"valueX\");\r\n                        if (value === 100) {\r\n                            return \"[bold]{name}[/]\\n{category}: {valueX}%\";\r\n                        } else {\r\n                            return \"[bold]{name}[/]\\n{category}: {valueX}\";\r\n                        }\r\n                    }\r\n                    return text;\r\n                });\r\n\r\n                series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n                    var dataItem = target.dataItem;\r\n                    if (dataItem) {\r\n                        var category = dataItem.get(\"categoryY\");\r\n                        var value = dataItem.get(\"valueX\");\r\n                        if (value === 100) {\r\n                            return am5.color(0x228B22); // Green for 100%\r\n                        } else {\r\n                            switch (category) {\r\n                                case \"Folders\":\r\n                                    return am5.color(0xFFD700);\r\n                                case \"Documents\":\r\n                                    return am5.color(0xFFA500);\r\n                                case \"Non Expired\":\r\n                                    return am5.color(0x228B22);\r\n                                case \"Nearly Expired 30 Days\":\r\n                                    return am5.color(0xEE4B2B);\r\n                                case \"Nearly Expired 60 Days\":\r\n                                    return am5.color(0xFF5C5C);\r\n                                case \"Nearly Expired 90 Days\":\r\n                                    return am5.color(0xFF8A8A);\r\n                                case \"Expired\":\r\n                                    return value === 100 ? am5.color(0x228B22) : am5.color(0xFF0000); // Green for 100%, Red otherwise\r\n                                default:\r\n                                    return am5.color(0x000000);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return fill;\r\n                });\r\n\r\n                // Add bullets to display values inside or outside the bars\r\n                series.bullets.push(function(root, series, dataItem) {\r\n                    var value = dataItem.get(\"valueX\");\r\n                    var labelInside = value < 15 ? false : true; // Adjust threshold as needed\r\n                    var category = dataItem.get(\"categoryY\");\r\n\r\n                    // Check if the category is Expired, Nearly Expired 30 Days, Nearly Expired 60 Days, or Nearly Expired 90 Days\r\n                    var displayPercentage = [\"Nearly Expired 30 Days\", \"Nearly Expired 60 Days\", \"Nearly Expired 90 Days\"].includes(category);\r\n\r\n                    // Determine the label color based on the category\r\n                    var labelColor = (category === \"Folders\") ? am5.color(0x000000) : am5.color(0xFFFFFF);\r\n\r\n                    return am5.Bullet.new(root, {\r\n                        locationX: labelInside ? 0.5 : 1.05,\r\n                        locationY: 0.5,\r\n                        sprite: am5.Label.new(root, {\r\n                            centerX: labelInside ? am5.p50 : am5.p0,\r\n                            centerY: am5.p50,\r\n                            text: value === 100 ? \"{valueX}%\" : \"{valueX}\",\r\n                            fill: labelColor,\r\n                            populateText: true\r\n                        })\r\n                    });\r\n                });\r\n\r\n                series.data.setAll(chartData);\r\n                series.appear();\r\n\r\n                // Add legend\r\n                var legend = chart.children.push(am5.Legend.new(root, {\r\n                    centerX: am5.p50,\r\n                    x: am5.p50\r\n                }));\r\n\r\n                // Add legend items manually\r\n                legend.data.setAll([\r\n                    { name: \"Folders\", fill: am5.color(0xFFFF00) },\r\n                    { name: \"Documents\", fill: am5.color(0xFFA500) },\r\n                    { name: \"Non Expired\", fill: am5.color(0x228B22) },\r\n                    { name: \"Expired\", fill: am5.color(0xFF0000) },\r\n                    { name: \"Nearly Expired 30 Days\", fill: am5.color(0xEE4B2B) },\r\n                    { name: \"Nearly Expired 60 Days\", fill: am5.color(0xFF5C5C) },\r\n                    { name: \"Nearly Expired 90 Days\", fill: am5.color(0xFF8A8A) }\r\n                ]);\r\n\r\n                // Add cursor\r\n                var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(root, {\r\n                    behavior: \"none\" // No zooming on scroll\r\n                }));\r\n                cursor.lineY.set(\"forceHidden\", true);\r\n                cursor.lineX.set(\"forceHidden\", true);\r\n\r\n                // Make stuff animate on load\r\n                chart.appear(1000, 100);\r\n\r\n                // Handle window resize\r\n                function handleResize() {\r\n                    if (window.innerWidth < 600) {\r\n                        legend.set(\"layout\", root.verticalLayout);\r\n                    } else {\r\n                        legend.set(\"layout\", root.horizontalLayout);\r\n                    }\r\n                }\r\n\r\n                window.addEventListener('resize', function() {\r\n                    handleResize();\r\n                    chart.appear(0, 0);\r\n                });\r\n\r\n                handleResize(); // Initial call to set the correct layout\r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching data:', error);\r\n            alert('Failed to fetch compliance data. Please try again later.');\r\n        });\r\n});\r\n\r\n\r\n\r\n\r\n//COMPLIANCE AND NON COMPLIANCE ANALYTICS\r\n$.ajax({\r\n    url: 'AnalyticsIQ/compliance_non_data.php',\r\n    method: 'GET',\r\n    dataType: 'json',\r\n    success: function(data) {\r\n        am5.ready(function() {\r\n            // Create root element\r\n            var root = am5.Root.new(\"chartdiv4\");\r\n\r\n            // Set themes\r\n            root.setThemes([\r\n                am5themes_Animated.new(root)\r\n            ]);\r\n\r\n            // Create chart\r\n            var chart = root.container.children.push(am5percent.PieChart.new(root, {\r\n                layout: root.verticalLayout\r\n            }));\r\n\r\n            // Create series\r\n            var series = chart.series.push(am5percent.PieSeries.new(root, {\r\n                valueField: \"value\",\r\n                categoryField: \"category\"\r\n            }));\r\n\r\n            // Prepare data for the chart\r\n            var chartData = [];\r\n\r\n            if (data.compliantPercentage > 0 || data.nonCompliantPercentage > 0) {\r\n                chartData = [\r\n                    {\r\n                        category: \"Compliance\",\r\n                        value: data.compliantPercentage\r\n                    },\r\n                    {\r\n                        category: \"Non-Compliance\",\r\n                        value: data.nonCompliantPercentage\r\n                    }\r\n                ];\r\n            } else {\r\n                chartData = [\r\n                    {\r\n                        category: \"No Data\",\r\n                        value: 1\r\n                    }\r\n                ];\r\n            }\r\n\r\n            // Set data\r\n            series.data.setAll(chartData);\r\n\r\n            // Apply color to each slice explicitly\r\n            series.slices.each(function(slice) {\r\n                if (slice.dataItem.dataContext.category === \"Compliance\") {\r\n                    slice.set(\"fill\", am5.color(0x5CFF5C)); // Green color for compliance\r\n                    slice.set(\"stroke\", am5.color(0x5CFF5C));\r\n                } else if (slice.dataItem.dataContext.category === \"Non-Compliance\") {\r\n                    slice.set(\"fill\", am5.color(0xFF0000)); // Red color for non-compliance\r\n                    slice.set(\"stroke\", am5.color(0xFF0000));\r\n                } else {\r\n                    slice.set(\"fill\", am5.color(0xCCCCCC)); // Grey color for no data\r\n                    slice.set(\"stroke\", am5.color(0xCCCCCC));\r\n                }\r\n            });\r\n\r\n            // Add legend\r\n            var legend = chart.children.push(am5.Legend.new(root, {\r\n                centerX: am5.percent(50),\r\n                x: am5.percent(50),\r\n                layout: root.horizontalLayout\r\n            }));\r\n\r\n            legend.data.setAll(series.dataItems);\r\n        });\r\n    },\r\n    error: function(xhr, status, error) {\r\n        console.error('AJAX request failed:', status, error);\r\n    }\r\n});\r\n\r\n\r\n//ANNUAL REVIEW ANALYTICS\r\n$(document).ready(function() {\r\n    $.ajax({\r\n        url: 'AnalyticsIQ/annual_review_data.php',\r\n        type: 'GET',\r\n        dataType: 'json',\r\n        success: function(data) {\r\n            var reviewPercentage = data.review_percentage;\r\n\r\n            am5.ready(function() {\r\n                // Create root element\r\n                var root = am5.Root.new(\"chartdiv3\");\r\n\r\n                // Set themes\r\n                root.setThemes([\r\n                    am5themes_Animated.new(root)\r\n                ]);\r\n\r\n                // Create chart\r\n                var chart = root.container.children.push(\r\n                    am5percent.PieChart.new(root, {\r\n                        endAngle: 270\r\n                    })\r\n                );\r\n\r\n                // Create series\r\n                var series = chart.series.push(\r\n                    am5percent.PieSeries.new(root, {\r\n                        valueField: \"value\",\r\n                        categoryField: \"category\",\r\n                        endAngle: 270\r\n                    })\r\n                );\r\n\r\n                series.data.setAll([\r\n                    { category: \"Annual Review\", value: reviewPercentage },\r\n                    { category: \"Remaining\", value: 100 - reviewPercentage }\r\n                ]);\r\n\r\n                // Add legend and position it below the chart, aligned horizontally\r\n                var legend = root.container.children.push(am5.Legend.new(root, {\r\n                    centerX: am5.percent(50),\r\n                    x: am5.percent(50),\r\n                    centerY: am5.percent(100),\r\n                    y: am5.percent(100),\r\n                    layout: root.horizontalLayout  // Set layout to horizontal\r\n                }));\r\n                legend.data.setAll(series.dataItems);\r\n\r\n                series.appear(1000, 100);\r\n            }); // end am5.ready()\r\n        },\r\n        error: function(xhr, status, error) {\r\n            console.error('Error fetching data:', error);\r\n        }\r\n    });\r\n});\r\n"]}