{"version":3,"sources":["customer_chart.js"],"names":["currentRoot","complianceRoot","auditRoot","displayChart","data","forEach","root","dispose","document","querySelector","innerText","vendor_name","am5","Root","setThemes","am5themes_Animated","chart","container","children","push","am5xy","XYChart","panX","panY","wheelX","wheelY","pinchZoomX","cursor","set","XYCursor","behavior","lineY","xAxis","xAxes","CategoryAxis","categoryField","renderer","AxisRendererX","minGridDistance","yAxis","yAxes","ValueAxis","AxisRendererY","get","labels","template","setAll","rotation","centerY","p50","centerX","p100","series","ColumnSeries","name","valueYField","categoryXField","totalDocuments","document_count","document_other_count","chartData","category","value","color","non_expired","expired","nearly_expired_30","nearly_expired_60","nearly_expired_90","columns","tooltipText","fill","target","dataItem","dataContext","stroke","width","percent","fillOpacity","strokeOpacity","adapters","add","display","w","getPrivate","h","moveTo","bezierCurveTo","appear","complianceChart","am5percent","PieChart","radius","complianceSeries","PieSeries","valueField","colors","ColorSet","compliant_count","non_compliant_count","slices","auditData","reviewed_by","annual_review_count","total_audits","audit_report_start","parseDate","audit_report_date","trim","audit_report_duration","calculateDuration","audit_report_end_date","audit_certificate_start","audit_certificate_date","audit_certificate_duration","audit_certificate_end_date","audit_corrective_action_start","audit_action_date","audit_corrective_action_duration","audit_action_end_date","reviewed_start","reviewed_date","reviewed_duration","reviewed_due","length","ready","makeSeries","fieldName","isDuration","stacked","auditChart","auditXAxis","duration","legend","bullets","Bullet","locationY","sprite","Label","text","interfaceColors","populateText","layout","verticalLayout","marginTop","Legend","x","cellStartLocation","cellEndLocation","fontSize","auditYAxis","auditYAxis2","opposite","err","console","log","$","modal","dateString","split","map","Number","month","day","year","Date","startDate","endDate","start","end","on","e","id","relatedTarget","fetch","method","headers","body","then","response","ok","Error","statusText","json","error","alert","root1","chart1","paddingLeft","xRenderer1","minorGridEnabled","xAxis1","maxDeviation","tooltip","Tooltip","grid","location","yAxis1","min","cursor1","series1","openValueYField","templateField","stepSeries1","StepLineSeries","noRisers","locationX","strokes","strokeDasharray","colorSet1","data1","parseInt","donutData","total_send","open","stepValue","columnConfig","displayValue","pending","approved","non_approved","emergency_use_only","do_not_use","pinchZoomY","lineX","yRenderer","aggregatedData","reduce","sum","item","parseFloat","compliance_percentage","d_non_compliance","pending_count","approved_count","non_approved_count","emergency_use_only_count","do_not_use_count","received_count","valueXField","categoryYField","labelText","cornerRadiusTL","cornerRadiusBL"],"mappings":"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","sourcesContent":["//Customer Requirements, Audit & Review for Modal Analytics\r\n\r\nlet currentRoot = null;\r\nlet complianceRoot = null;\r\nlet auditRoot = null;\r\n\r\nfunction displayChart(data) {\r\n    // Dispose of the existing chart instances if they exist\r\n    [currentRoot, complianceRoot, auditRoot].forEach(root => {\r\n        if (root) {\r\n            root.dispose();\r\n        }\r\n    });\r\n\r\n    // Update the modal title with the vendor's name\r\n    document.querySelector(\"#modalChart .modal-title\").innerText = \"Customer Name: \" + data.vendor_name;\r\n\r\n    // Create root element for requirement chart\r\n    currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n    currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n    var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n        panX: false,\r\n        panY: false,\r\n        wheelX: \"none\",\r\n        wheelY: \"none\",\r\n        pinchZoomX: false\r\n    }));\r\n\r\n    var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n        behavior: \"none\"\r\n    }));\r\n    cursor.lineY.set(\"visible\", false);\r\n\r\n    var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n        categoryField: \"category\",\r\n        renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n    }));\r\n\r\n    var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n        renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n    }));\r\n\r\n    xAxis.get(\"renderer\").labels.template.setAll({\r\n        rotation: -30,\r\n        centerY: am5.p50,\r\n        centerX: am5.p100\r\n    });\r\n\r\n    var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n        name: \"Requirements\",\r\n        xAxis: xAxis,\r\n        yAxis: yAxis,\r\n        valueYField: \"value\",\r\n        categoryXField: \"category\"\r\n    }));\r\n\r\n    const totalDocuments = data.document_count + data.document_other_count;\r\n    const chartData = [\r\n        { category: \"Requirements\", value: totalDocuments, color: am5.color(0x4da6ff) },\r\n        { category: \"Non Expired\", value: data.non_expired, color: am5.color(0x32CD32) },\r\n        { category: \"Expired\", value: data.expired, color: am5.color(0xFF0000) },\r\n        { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(0xff3434) },\r\n        { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(0xffb733) },\r\n        { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(0xFFD700) }\r\n    ];\r\n    series.data.setAll(chartData);\r\n    xAxis.data.setAll(chartData);\r\n\r\n    series.columns.template.setAll({\r\n        tooltipText: \"{category}: {valueY}\",\r\n        fill: function(target) {\r\n            return target.dataItem.dataContext.color;\r\n        },\r\n        stroke: function(target) {\r\n            return target.dataItem.dataContext.color;\r\n        },\r\n        width: am5.percent(120),\r\n        fillOpacity: 0.8,\r\n        strokeOpacity: 0.8\r\n    });\r\n\r\n    series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n        return target.dataItem.dataContext.color;\r\n    });\r\n    series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n        return target.dataItem.dataContext.color;\r\n    });\r\n\r\n    series.columns.template.set(\"draw\", function(display, target) {\r\n        var w = target.getPrivate(\"width\", 0);\r\n        var h = target.getPrivate(\"height\", 0);\r\n        display.moveTo(0, h);\r\n        display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n        display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n    });\r\n\r\n    series.appear(1000);\r\n    chart.appear(1000, 100);\r\n\r\n    complianceRoot = am5.Root.new(\"complianceChartDiv\");\r\n    complianceRoot.setThemes([am5themes_Animated.new(complianceRoot)]);\r\n    var complianceChart = complianceRoot.container.children.push(am5percent.PieChart.new(complianceRoot, {\r\n        radius: am5.percent(65)  // Adjust the size of the pie chart\r\n    }));\r\n    var complianceSeries = complianceChart.series.push(am5percent.PieSeries.new(complianceRoot, {\r\n        valueField: \"value\",\r\n        categoryField: \"category\",\r\n        colors: am5.ColorSet.new(complianceRoot, {\r\n            colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n        })\r\n    }));\r\n    complianceSeries.data.setAll([\r\n        { category: \"Compliance\", value: data.compliant_count },\r\n        { category: \"Non-Compliance\", value: data.non_compliant_count }\r\n    ]);\r\n    complianceSeries.slices.template.setAll({\r\n        tooltipText: \"{category}: {value}\"\r\n    });\r\n\r\n\r\n    // Integrate original audit chart script if audit_data exists\r\n    const auditData = [{\r\n        reviewed_by: data.reviewed_by,\r\n        annual_review_count: data.annual_review_count,\r\n        total_audits: data.total_audits,\r\n        audit_report_start: parseDate(data.audit_report_date.trim()),\r\n        audit_report_duration: calculateDuration(data.audit_report_date, data.audit_report_end_date),\r\n        audit_certificate_start: parseDate(data.audit_certificate_date.trim()),\r\n        audit_certificate_duration: calculateDuration(data.audit_certificate_date, data.audit_certificate_end_date),\r\n        audit_corrective_action_start: parseDate(data.audit_action_date.trim()),\r\n        audit_corrective_action_duration: calculateDuration(data.audit_action_date, data.audit_action_end_date),\r\n        reviewed_start: parseDate(data.reviewed_date.trim()),\r\n        reviewed_duration: calculateDuration(data.reviewed_date, data.reviewed_due)\r\n    }];\r\n\r\n    if (auditData.length > 0) {\r\n        am5.ready(function() {\r\n            try {\r\n                auditRoot = am5.Root.new(\"auditChartdiv\");\r\n\r\n                // Set themes\r\n                auditRoot.setThemes([am5themes_Animated.new(auditRoot)]);\r\n\r\n                // Create chart\r\n                var auditChart = auditRoot.container.children.push(am5xy.XYChart.new(auditRoot, {\r\n                    panX: false,\r\n                    panY: false,\r\n                    wheelX: \"none\",\r\n                    wheelY: \"none\",\r\n                    layout: auditRoot.verticalLayout,\r\n                    marginTop: 20 // Adjust this value for more/less space\r\n                }));\r\n\r\n                // Add legend\r\n                var legend = auditChart.children.push(\r\n                    am5.Legend.new(auditRoot, {\r\n                        centerX: am5.p50,\r\n                        x: am5.p50,\r\n                        marginTop: 20\r\n                    })\r\n                );\r\n\r\n                // Create axes\r\n                var auditXAxis = auditChart.xAxes.push(am5xy.CategoryAxis.new(auditRoot, {\r\n                    categoryField: \"reviewed_by\",\r\n                    renderer: am5xy.AxisRendererX.new(auditRoot, {\r\n                        cellStartLocation: 0.1,\r\n                        cellEndLocation: 0.9\r\n                    })\r\n                }));\r\n                auditXAxis.data.setAll(auditData);\r\n                auditXAxis.get(\"renderer\").labels.template.adapters.add(\"text\", function(text, target) {\r\n                    return \"Reviewed by: \" + text;\r\n                });\r\n                auditXAxis.get(\"renderer\").labels.template.setAll({\r\n                    fontSize: 16 \r\n                });\r\n\r\n                var auditYAxis = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n                    renderer: am5xy.AxisRendererY.new(auditRoot, {})\r\n                }));\r\n\r\n                var auditYAxis2 = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n                    renderer: am5xy.AxisRendererY.new(auditRoot, { opposite: true })\r\n                }));\r\n\r\n                function makeSeries(name, fieldName, color, isDuration, stacked, yAxis) {\r\n                    var series = auditChart.series.push(am5xy.ColumnSeries.new(auditRoot, {\r\n                        name: name,\r\n                        xAxis: auditXAxis,\r\n                        yAxis: yAxis,\r\n                        valueYField: fieldName,\r\n                        categoryXField: \"reviewed_by\",\r\n                        stacked: stacked,\r\n                        fill: color\r\n                    }));\r\n\r\n                    series.columns.template.setAll({\r\n                        tooltipText: isDuration ? \"{name}: {valueY} days\" : \"{name}: {valueY}\",\r\n                        width: am5.percent(90),\r\n                        strokeOpacity: 0,\r\n                        fillOpacity: 10,\r\n                    });\r\n\r\n                    if (isDuration) {\r\n                        series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n                            const duration = target.dataItem.get(\"valueY\");\r\n                            if (duration <= 30) return am5.color(0xFF0000);\r\n                            if (duration <= 60) return am5.color(0xFFA500);\r\n                            if (duration <= 90) return am5.color(0xFFD700);\r\n                            return am5.color(0x32CD32);\r\n                        });\r\n                    }\r\n\r\n                    series.data.setAll(auditData);\r\n                    series.appear();\r\n\r\n                    if (name !== \"Audit Report Duration\" && name !== \"Audit Certificate Duration\" && name !== \"Audit Corrective Action Duration\" && name !== \"Reviewed Duration\") {\r\n                        legend.data.push(series);\r\n                    }\r\n\r\n                    // Add label count on top of the bars\r\n                    series.bullets.push(function() {\r\n                        return am5.Bullet.new(auditRoot, {\r\n                            locationY: 0.5,\r\n                            sprite: am5.Label.new(auditRoot, {\r\n                                text: isDuration ? \"Duration: {valueY} days \\n\" : \"Start: {valueY} \\n\",\r\n                                fill: auditRoot.interfaceColors.get(\"alternativeText\"),\r\n                                centerY: am5.p50,\r\n                                centerX: am5.p50,\r\n                                populateText: true,\r\n                                adapters: {\r\n                                    text: function(text, target) {\r\n                                        var value = target.dataItem.get(\"valueY\");\r\n                                        return value != null ? text : \"\";\r\n                                    }\r\n                                }\r\n                            })\r\n                        });\r\n                    });\r\n\r\n                    return series;\r\n                }\r\n\r\n                // Create series for each date pair with start series first and then duration series\r\n                makeSeries(\"Audit Report Start\", \"audit_report_start\", am5.color(0x7c6ed3), false, false, auditYAxis);\r\n                makeSeries(\"Audit Report Duration\", \"audit_report_duration\", am5.color(0xFFD700), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Audit Certificate Start\", \"audit_certificate_start\", am5.color(0x0096FF), false, false, auditYAxis);\r\n                makeSeries(\"Audit Certificate Duration\", \"audit_certificate_duration\", am5.color(0x4A731C), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Audit Corrective Action Start\", \"audit_corrective_action_start\", am5.color(0xd981cd), false, false, auditYAxis);\r\n                makeSeries(\"Audit Corrective Action Duration\", \"audit_corrective_action_duration\", am5.color(0x883407), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Reviewed Start\", \"reviewed_start\", am5.color(0xFA8072), false, false, auditYAxis);\r\n                makeSeries(\"Reviewed Duration\", \"reviewed_duration\", am5.color(0x32CD32), true, true, auditYAxis);\r\n\r\n                auditChart.appear(1000, 100);\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    $('#modalChart').modal('show');\r\n}\r\n\r\n// Helper function to parse date strings\r\nfunction parseDate(dateString) {\r\n    const [month, day, year] = dateString.split('/').map(Number);\r\n    return new Date(year, month - 1, day);\r\n}\r\n\r\n// Helper function to calculate duration between two dates\r\nfunction calculateDuration(startDate, endDate) {\r\n    const start = parseDate(startDate.trim());\r\n    const end = parseDate(endDate.trim());\r\n    const duration = (end - start) / (1000 * 60 * 60 * 24);\r\n    return duration;\r\n}\r\n\r\n// Event listener for when the modal is shown\r\n$('#modalChart').on('shown.bs.modal', function (e) {\r\n    var id = $(e.relatedTarget).data('id');\r\n    fetch('AnalyticsIQ/fetch_customer_data.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        },\r\n        body: 'id=' + id\r\n    })\r\n    .then(response => {\r\n        if (!response.ok) {\r\n            throw new Error('Network response was not ok ' + response.statusText);\r\n        }\r\n        return response.json();\r\n    })\r\n    .then(data => {\r\n        console.log(data);  // Log data for debugging\r\n        displayChart(data);\r\n    })\r\n    .catch(error => {\r\n        console.error('Error fetching or processing data:', error);\r\n        alert('An error occurred while fetching the data. Please try again later.');\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\n//Send Tab\r\n\r\nam5.ready(function() {\r\n  // First Waterfall Chart\r\n  var root1 = am5.Root.new(\"waterfallChart1\");\r\n\r\n  root1.setThemes([\r\n    am5themes_Animated.new(root1)\r\n  ]);\r\n\r\n  var chart1 = root1.container.children.push(am5xy.XYChart.new(root1, {\r\n    panX: false,\r\n    panY: false,\r\n    paddingLeft: 0\r\n  }));\r\n\r\n  var xRenderer1 = am5xy.AxisRendererX.new(root1, {\r\n    minGridDistance: 30,\r\n    minorGridEnabled: true\r\n  });\r\n\r\n  var xAxis1 = chart1.xAxes.push(am5xy.CategoryAxis.new(root1, {\r\n    maxDeviation: 0,\r\n    categoryField: \"category\",\r\n    renderer: xRenderer1,\r\n    tooltip: am5.Tooltip.new(root1, {})\r\n  }));\r\n\r\n  xRenderer1.grid.template.setAll({\r\n    location: 1\r\n  });\r\n\r\n  var yAxis1 = chart1.yAxes.push(am5xy.ValueAxis.new(root1, {\r\n    maxDeviation: 0,\r\n    min: 0,\r\n    renderer: am5xy.AxisRendererY.new(root1, { strokeOpacity: 0.1 }),\r\n    tooltip: am5.Tooltip.new(root1, {})\r\n  }));\r\n\r\n  var cursor1 = chart1.set(\"cursor\", am5xy.XYCursor.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1\r\n  }));\r\n\r\n  var series1 = chart1.series.push(am5xy.ColumnSeries.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1,\r\n    valueYField: \"value\",\r\n    openValueYField: \"open\",\r\n    categoryXField: \"category\"\r\n  }));\r\n\r\n  series1.columns.template.setAll({\r\n    templateField: \"columnConfig\",\r\n    strokeOpacity: 0\r\n  });\r\n\r\n  series1.bullets.push(function() {\r\n    return am5.Bullet.new(root1, {\r\n      sprite: am5.Label.new(root1, {\r\n        text: \"{displayValue}\",\r\n        centerY: am5.p50,\r\n        centerX: am5.p50,\r\n        populateText: true\r\n      })\r\n    });\r\n  });\r\n\r\n  var stepSeries1 = chart1.series.push(am5xy.StepLineSeries.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1,\r\n    valueYField: \"stepValue\",\r\n    categoryXField: \"category\",\r\n    noRisers: true,\r\n    locationX: 0.65,\r\n    stroke: root1.interfaceColors.get(\"alternativeBackground\")\r\n  }));\r\n\r\n  stepSeries1.strokes.template.setAll({\r\n    strokeDasharray: [3, 3]\r\n  });\r\n\r\n  var colorSet1 = am5.ColorSet.new(root1, {});\r\n\r\n  fetch('AnalyticsIQ/customer_send_data.php')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      var data1 = [\r\n        { category: \"Total Send\", value: parseInt(data.donutData.total_send), open: 0, stepValue: parseInt(data.donutData.total_send), columnConfig: { fill: am5.color(0x4da6ff) }, displayValue: parseInt(data.donutData.total_send) },\r\n        { category: \"Pending\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), open: parseInt(data.donutData.total_send), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), columnConfig: { fill: am5.color(0xf4b943) }, displayValue: parseInt(data.donutData.pending) },\r\n        { category: \"Approved\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), columnConfig: { fill: am5.color(0x32CD32) }, displayValue: parseInt(data.donutData.approved) },\r\n        { category: \"Non Approved\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), columnConfig: { fill: am5.color(0xff0000) }, displayValue: parseInt(data.donutData.non_approved) },\r\n        { category: \"Emergency Use Only\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), columnConfig: { fill: am5.color(0xff8080) }, displayValue: parseInt(data.donutData.emergency_use_only) },\r\n        { category: \"Do Not Use\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), open: 0, columnConfig: { fill: am5.color(0xffff00) }, displayValue: parseInt(data.donutData.do_not_use) }\r\n      ];\r\n\r\n      xAxis1.data.setAll(data1);\r\n      series1.data.setAll(data1);\r\n      stepSeries1.data.setAll(data1);\r\n    })\r\n    .catch(error => console.error('Error fetching data:', error));\r\n});\r\n\r\n\r\n\r\n\r\n//RECEIVED Tab\r\n\r\nam5.ready(function() {\r\n  var root = am5.Root.new(\"receivedchartdiv\");\r\n\r\n  root.setThemes([ am5themes_Animated.new(root) ]);\r\n\r\n  var chart = root.container.children.push(\r\n      am5xy.XYChart.new(root, {\r\n          panX: false, // Disable horizontal panning\r\n          panY: false, // Disable vertical panning\r\n          wheelX: \"none\", // Disable wheel zooming on X axis\r\n          wheelY: \"none\", // Disable wheel zooming on Y axis\r\n          pinchZoomY: false // Disable pinch zoom on Y axis\r\n      })\r\n  );\r\n\r\n  var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(root, {}));\r\n  cursor.lineX.set(\"visible\", false); // Hide vertical cursor line\r\n\r\n  var yRenderer = am5xy.AxisRendererY.new(root, { minGridDistance: 30 });\r\n  var yAxis = chart.yAxes.push(\r\n      am5xy.CategoryAxis.new(root, {\r\n          maxDeviation: 0.3,\r\n          categoryField: \"name\",\r\n          renderer: yRenderer\r\n      })\r\n  );\r\n\r\n  var xAxis = chart.xAxes.push(\r\n      am5xy.ValueAxis.new(root, {\r\n          renderer: am5xy.AxisRendererX.new(root, {})\r\n      })\r\n  );\r\n\r\n  // Fetch data from PHP script using fetch API\r\n  fetch('AnalyticsIQ/customer_received_data.php')\r\n      .then(function(response) {\r\n          return response.json();\r\n      })\r\n      .then(function(data) {\r\n          // console.log('Data received:', data); // Log the received data\r\n\r\n          if (data.length === 0) {\r\n              console.error('No data received');\r\n              return;\r\n          }\r\n\r\n          // Aggregate data counts\r\n          var aggregatedData = [\r\n              { name: \"Compliance\", value: data.reduce((sum, item) => sum + parseFloat(item.compliance_percentage), 0), color: am5.color(0x00FF00) }, // Green\r\n              { name: \"Non Compliance\", value: data.reduce((sum, item) => sum + parseInt(item.d_non_compliance), 0), color: am5.color(0xFF0000) }, // Red\r\n              { name: \"Pending\", value: data.reduce((sum, item) => sum + parseInt(item.pending_count), 0), color: am5.color(0xFFA500) }, // Orange\r\n              { name: \"Approved\", value: data.reduce((sum, item) => sum + parseInt(item.approved_count), 0), color: am5.color(0x32CD32) }, // Lime Green\r\n              { name: \"Non Approved\", value: data.reduce((sum, item) => sum + parseInt(item.non_approved_count), 0), color: am5.color(0xFF6347) }, // Light Red\r\n              { name: \"Emergency Use Only\", value: data.reduce((sum, item) => sum + parseInt(item.emergency_use_only_count), 0), color: am5.color(0xFFC0CB) }, // Pink\r\n              { name: \"Do Not Use\", value: data.reduce((sum, item) => sum + parseInt(item.do_not_use_count), 0), color: am5.color(0xFFFF00) }, // Yellow\r\n              { name: \"Total Received\", value: data.reduce((sum, item) => sum + parseInt(item.received_count), 0), color: am5.color(0x4da6ff) } // Blue\r\n          ];\r\n\r\n          var series = chart.series.push(\r\n              am5xy.ColumnSeries.new(root, {\r\n                  xAxis: xAxis,\r\n                  yAxis: yAxis,\r\n                  valueXField: \"value\", // Change to valueXField for horizontal bar chart\r\n                  categoryYField: \"name\", // Change to categoryYField for horizontal bar chart\r\n                  tooltip: am5.Tooltip.new(root, {\r\n                      labelText: \"{name}: {valueX}\" // Change to valueX for horizontal bar chart\r\n                  })\r\n              })\r\n          );\r\n\r\n          series.columns.template.setAll({ cornerRadiusTL: 5, cornerRadiusBL: 5 }); // Adjust corner radius for horizontal bars\r\n          series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n              return target.dataItem.dataContext.color;\r\n          });\r\n\r\n          series.columns.template.adapters.add(\"stroke\", function(stroke, target) {\r\n              return target.dataItem.dataContext.color;\r\n          });\r\n\r\n          series.data.setAll(aggregatedData);\r\n          yAxis.data.setAll(aggregatedData); // Set data for yAxis instead of xAxis for horizontal bar chart\r\n\r\n      })\r\n      .catch(function(error) {\r\n          console.error('Error fetching data:', error);\r\n      });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\n"],"file":"customer_chart.dev.js"}