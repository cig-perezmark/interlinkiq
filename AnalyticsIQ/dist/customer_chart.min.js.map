{"version":3,"sources":["customer_chart.js"],"names":["currentRoot","complianceRoot","auditRoot","displayChart","data","forEach","root","dispose","document","innerText","vendor_name","am5","Root","am5themes_Animated","chart","container","children","push","am5xy","XYChart","panX","querySelector","wheelX","setThemes","set","XYCursor","pinchZoomX","cursor","behavior","renderer","AxisRendererX","minGridDistance","categoryField","yAxes","ValueAxis","xAxis","get","labels","template","setAll","yAxis","AxisRendererY","centerX","p100","centerY","p50","series","ColumnSeries","valueYField","chartData","totalDocuments","document_count","document_other_count","color","value","non_expired","category","expired","nearly_expired_30","nearly_expired_60","nearly_expired_90","target","dataItem","dataContext","percent","add","fill","stroke","columns","display","w","h","getPrivate","moveTo","bezierCurveTo","strokeOpacity","appear","complianceSeries","adapters","am5percent","PieChart","radius","PieSeries","ColorSet","compliant_count","non_compliant_count","slices","colors","reviewed_by","annual_review_count","total_audits","audit_report_start","parseDate","audit_report_date","trim","calculateDuration","audit_report_end_date","audit_certificate_date","audit_corrective_action_start","audit_action_date","audit_action_end_date","reviewed_duration","reviewed_date","reviewed_due","auditData","length","ready","makeSeries","name","fieldName","isDuration","stacked","auditChart","auditXAxis","Bullet","populateText","tooltipText","width","fillOpacity","duration","legend","bullets","locationY","Label","Legend","text","interfaceColors","audit_certificate_duration","audit_certificate_end_date","audit_corrective_action_duration","layout","verticalLayout","marginTop","xAxes","CategoryAxis","auditYAxis","opposite","auditYAxis2","err","log","$","modal","_dateString$split$map2","_slicedToArray","dateString","split","map","Number","month","day","year","Date","startDate","endDate","start","on","e","id","fetch","end","body","then","response","relatedTarget","Error","statusText","headers","json","console","error","alert","root1","panY","paddingLeft","minorGridEnabled","xRenderer1","tooltip","Tooltip","grid","location","maxDeviation","min","yAxis1","chart1","xAxis1","categoryXField","series1","templateField","sprite","stepSeries1","StepLineSeries","strokeDasharray","locationX","parseInt","donutData","total_send","open","displayValue","stepValue","columnConfig","pending","approved","non_approved","emergency_use_only","do_not_use","data1","pinchZoomY","aggregatedData","yRenderer","sum","item","parseFloat","compliance_percentage","reduce","d_non_compliance","pending_count","approved_count","non_approved_count","emergency_use_only_count","received_count","valueXField","categoryYField","labelText","cornerRadiusTL","cornerRadiusBL"],"mappings":"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","file":"customer_chart.min.js","sourcesContent":["//Customer Requirements, Audit & Review for Modal Analytics\r\n\r\nlet currentRoot = null;\r\nlet complianceRoot = null;\r\nlet auditRoot = null;\r\n\r\nfunction displayChart(data) {\r\n    // Dispose of the existing chart instances if they exist\r\n    [currentRoot, complianceRoot, auditRoot].forEach(root => {\r\n        if (root) {\r\n            root.dispose();\r\n        }\r\n    });\r\n\r\n    // Update the modal title with the vendor's name\r\n    document.querySelector(\"#modalChart .modal-title\").innerText = \"Customer Name: \" + data.vendor_name;\r\n\r\n    // Create root element for requirement chart\r\n    currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n    currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n    var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n        panX: false,\r\n        panY: false,\r\n        wheelX: \"none\",\r\n        wheelY: \"none\",\r\n        pinchZoomX: false\r\n    }));\r\n\r\n    var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n        behavior: \"none\"\r\n    }));\r\n    cursor.lineY.set(\"visible\", false);\r\n\r\n    var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n        categoryField: \"category\",\r\n        renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n    }));\r\n\r\n    var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n        renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n    }));\r\n\r\n    xAxis.get(\"renderer\").labels.template.setAll({\r\n        rotation: -30,\r\n        centerY: am5.p50,\r\n        centerX: am5.p100\r\n    });\r\n\r\n    var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n        name: \"Requirements\",\r\n        xAxis: xAxis,\r\n        yAxis: yAxis,\r\n        valueYField: \"value\",\r\n        categoryXField: \"category\"\r\n    }));\r\n\r\n    const totalDocuments = data.document_count + data.document_other_count;\r\n    const chartData = [\r\n        { category: \"Requirements\", value: totalDocuments, color: am5.color(0x4da6ff) },\r\n        { category: \"Non Expired\", value: data.non_expired, color: am5.color(0x32CD32) },\r\n        { category: \"Expired\", value: data.expired, color: am5.color(0xFF0000) },\r\n        { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(0xff3434) },\r\n        { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(0xffb733) },\r\n        { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(0xFFD700) }\r\n    ];\r\n    series.data.setAll(chartData);\r\n    xAxis.data.setAll(chartData);\r\n\r\n    series.columns.template.setAll({\r\n        tooltipText: \"{category}: {valueY}\",\r\n        fill: function(target) {\r\n            return target.dataItem.dataContext.color;\r\n        },\r\n        stroke: function(target) {\r\n            return target.dataItem.dataContext.color;\r\n        },\r\n        width: am5.percent(120),\r\n        fillOpacity: 0.8,\r\n        strokeOpacity: 0.8\r\n    });\r\n\r\n    series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n        return target.dataItem.dataContext.color;\r\n    });\r\n    series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n        return target.dataItem.dataContext.color;\r\n    });\r\n\r\n    series.columns.template.set(\"draw\", function(display, target) {\r\n        var w = target.getPrivate(\"width\", 0);\r\n        var h = target.getPrivate(\"height\", 0);\r\n        display.moveTo(0, h);\r\n        display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n        display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n    });\r\n\r\n    series.appear(1000);\r\n    chart.appear(1000, 100);\r\n\r\n    complianceRoot = am5.Root.new(\"complianceChartDiv\");\r\n    complianceRoot.setThemes([am5themes_Animated.new(complianceRoot)]);\r\n    var complianceChart = complianceRoot.container.children.push(am5percent.PieChart.new(complianceRoot, {\r\n        radius: am5.percent(65)  // Adjust the size of the pie chart\r\n    }));\r\n    var complianceSeries = complianceChart.series.push(am5percent.PieSeries.new(complianceRoot, {\r\n        valueField: \"value\",\r\n        categoryField: \"category\",\r\n        colors: am5.ColorSet.new(complianceRoot, {\r\n            colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n        })\r\n    }));\r\n    complianceSeries.data.setAll([\r\n        { category: \"Compliance\", value: data.compliant_count },\r\n        { category: \"Non-Compliance\", value: data.non_compliant_count }\r\n    ]);\r\n    complianceSeries.slices.template.setAll({\r\n        tooltipText: \"{category}: {value}\"\r\n    });\r\n\r\n\r\n    // Integrate original audit chart script if audit_data exists\r\n    const auditData = [{\r\n        reviewed_by: data.reviewed_by,\r\n        annual_review_count: data.annual_review_count,\r\n        total_audits: data.total_audits,\r\n        audit_report_start: parseDate(data.audit_report_date.trim()),\r\n        audit_report_duration: calculateDuration(data.audit_report_date, data.audit_report_end_date),\r\n        audit_certificate_start: parseDate(data.audit_certificate_date.trim()),\r\n        audit_certificate_duration: calculateDuration(data.audit_certificate_date, data.audit_certificate_end_date),\r\n        audit_corrective_action_start: parseDate(data.audit_action_date.trim()),\r\n        audit_corrective_action_duration: calculateDuration(data.audit_action_date, data.audit_action_end_date),\r\n        reviewed_start: parseDate(data.reviewed_date.trim()),\r\n        reviewed_duration: calculateDuration(data.reviewed_date, data.reviewed_due)\r\n    }];\r\n\r\n    if (auditData.length > 0) {\r\n        am5.ready(function() {\r\n            try {\r\n                auditRoot = am5.Root.new(\"auditChartdiv\");\r\n\r\n                // Set themes\r\n                auditRoot.setThemes([am5themes_Animated.new(auditRoot)]);\r\n\r\n                // Create chart\r\n                var auditChart = auditRoot.container.children.push(am5xy.XYChart.new(auditRoot, {\r\n                    panX: false,\r\n                    panY: false,\r\n                    wheelX: \"none\",\r\n                    wheelY: \"none\",\r\n                    layout: auditRoot.verticalLayout,\r\n                    marginTop: 20 // Adjust this value for more/less space\r\n                }));\r\n\r\n                // Add legend\r\n                var legend = auditChart.children.push(\r\n                    am5.Legend.new(auditRoot, {\r\n                        centerX: am5.p50,\r\n                        x: am5.p50,\r\n                        marginTop: 20\r\n                    })\r\n                );\r\n\r\n                // Create axes\r\n                var auditXAxis = auditChart.xAxes.push(am5xy.CategoryAxis.new(auditRoot, {\r\n                    categoryField: \"reviewed_by\",\r\n                    renderer: am5xy.AxisRendererX.new(auditRoot, {\r\n                        cellStartLocation: 0.1,\r\n                        cellEndLocation: 0.9\r\n                    })\r\n                }));\r\n                auditXAxis.data.setAll(auditData);\r\n                auditXAxis.get(\"renderer\").labels.template.adapters.add(\"text\", function(text, target) {\r\n                    return \"Reviewed by: \" + text;\r\n                });\r\n                auditXAxis.get(\"renderer\").labels.template.setAll({\r\n                    fontSize: 16 \r\n                });\r\n\r\n                var auditYAxis = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n                    renderer: am5xy.AxisRendererY.new(auditRoot, {})\r\n                }));\r\n\r\n                var auditYAxis2 = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n                    renderer: am5xy.AxisRendererY.new(auditRoot, { opposite: true })\r\n                }));\r\n\r\n                function makeSeries(name, fieldName, color, isDuration, stacked, yAxis) {\r\n                    var series = auditChart.series.push(am5xy.ColumnSeries.new(auditRoot, {\r\n                        name: name,\r\n                        xAxis: auditXAxis,\r\n                        yAxis: yAxis,\r\n                        valueYField: fieldName,\r\n                        categoryXField: \"reviewed_by\",\r\n                        stacked: stacked,\r\n                        fill: color\r\n                    }));\r\n\r\n                    series.columns.template.setAll({\r\n                        tooltipText: isDuration ? \"{name}: {valueY} days\" : \"{name}: {valueY}\",\r\n                        width: am5.percent(90),\r\n                        strokeOpacity: 0,\r\n                        fillOpacity: 10,\r\n                    });\r\n\r\n                    if (isDuration) {\r\n                        series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n                            const duration = target.dataItem.get(\"valueY\");\r\n                            if (duration <= 30) return am5.color(0xFF0000);\r\n                            if (duration <= 60) return am5.color(0xFFA500);\r\n                            if (duration <= 90) return am5.color(0xFFD700);\r\n                            return am5.color(0x32CD32);\r\n                        });\r\n                    }\r\n\r\n                    series.data.setAll(auditData);\r\n                    series.appear();\r\n\r\n                    if (name !== \"Audit Report Duration\" && name !== \"Audit Certificate Duration\" && name !== \"Audit Corrective Action Duration\" && name !== \"Reviewed Duration\") {\r\n                        legend.data.push(series);\r\n                    }\r\n\r\n                    // Add label count on top of the bars\r\n                    series.bullets.push(function() {\r\n                        return am5.Bullet.new(auditRoot, {\r\n                            locationY: 0.5,\r\n                            sprite: am5.Label.new(auditRoot, {\r\n                                text: isDuration ? \"Duration: {valueY} days \\n\" : \"Start: {valueY} \\n\",\r\n                                fill: auditRoot.interfaceColors.get(\"alternativeText\"),\r\n                                centerY: am5.p50,\r\n                                centerX: am5.p50,\r\n                                populateText: true,\r\n                                adapters: {\r\n                                    text: function(text, target) {\r\n                                        var value = target.dataItem.get(\"valueY\");\r\n                                        return value != null ? text : \"\";\r\n                                    }\r\n                                }\r\n                            })\r\n                        });\r\n                    });\r\n\r\n                    return series;\r\n                }\r\n\r\n                // Create series for each date pair with start series first and then duration series\r\n                makeSeries(\"Audit Report Start\", \"audit_report_start\", am5.color(0x7c6ed3), false, false, auditYAxis);\r\n                makeSeries(\"Audit Report Duration\", \"audit_report_duration\", am5.color(0xFFD700), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Audit Certificate Start\", \"audit_certificate_start\", am5.color(0x0096FF), false, false, auditYAxis);\r\n                makeSeries(\"Audit Certificate Duration\", \"audit_certificate_duration\", am5.color(0x4A731C), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Audit Corrective Action Start\", \"audit_corrective_action_start\", am5.color(0xd981cd), false, false, auditYAxis);\r\n                makeSeries(\"Audit Corrective Action Duration\", \"audit_corrective_action_duration\", am5.color(0x883407), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Reviewed Start\", \"reviewed_start\", am5.color(0xFA8072), false, false, auditYAxis);\r\n                makeSeries(\"Reviewed Duration\", \"reviewed_duration\", am5.color(0x32CD32), true, true, auditYAxis);\r\n\r\n                auditChart.appear(1000, 100);\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    $('#modalChart').modal('show');\r\n}\r\n\r\n// Helper function to parse date strings\r\nfunction parseDate(dateString) {\r\n    const [month, day, year] = dateString.split('/').map(Number);\r\n    return new Date(year, month - 1, day);\r\n}\r\n\r\n// Helper function to calculate duration between two dates\r\nfunction calculateDuration(startDate, endDate) {\r\n    const start = parseDate(startDate.trim());\r\n    const end = parseDate(endDate.trim());\r\n    const duration = (end - start) / (1000 * 60 * 60 * 24);\r\n    return duration;\r\n}\r\n\r\n// Event listener for when the modal is shown\r\n$('#modalChart').on('shown.bs.modal', function (e) {\r\n    var id = $(e.relatedTarget).data('id');\r\n    fetch('AnalyticsIQ/fetch_customer_data.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        },\r\n        body: 'id=' + id\r\n    })\r\n    .then(response => {\r\n        if (!response.ok) {\r\n            throw new Error('Network response was not ok ' + response.statusText);\r\n        }\r\n        return response.json();\r\n    })\r\n    .then(data => {\r\n        console.log(data);  // Log data for debugging\r\n        displayChart(data);\r\n    })\r\n    .catch(error => {\r\n        console.error('Error fetching or processing data:', error);\r\n        alert('An error occurred while fetching the data. Please try again later.');\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\n//Send Tab\r\n\r\nam5.ready(function() {\r\n  // First Waterfall Chart\r\n  var root1 = am5.Root.new(\"waterfallChart1\");\r\n\r\n  root1.setThemes([\r\n    am5themes_Animated.new(root1)\r\n  ]);\r\n\r\n  var chart1 = root1.container.children.push(am5xy.XYChart.new(root1, {\r\n    panX: false,\r\n    panY: false,\r\n    paddingLeft: 0\r\n  }));\r\n\r\n  var xRenderer1 = am5xy.AxisRendererX.new(root1, {\r\n    minGridDistance: 30,\r\n    minorGridEnabled: true\r\n  });\r\n\r\n  var xAxis1 = chart1.xAxes.push(am5xy.CategoryAxis.new(root1, {\r\n    maxDeviation: 0,\r\n    categoryField: \"category\",\r\n    renderer: xRenderer1,\r\n    tooltip: am5.Tooltip.new(root1, {})\r\n  }));\r\n\r\n  xRenderer1.grid.template.setAll({\r\n    location: 1\r\n  });\r\n\r\n  var yAxis1 = chart1.yAxes.push(am5xy.ValueAxis.new(root1, {\r\n    maxDeviation: 0,\r\n    min: 0,\r\n    renderer: am5xy.AxisRendererY.new(root1, { strokeOpacity: 0.1 }),\r\n    tooltip: am5.Tooltip.new(root1, {})\r\n  }));\r\n\r\n  var cursor1 = chart1.set(\"cursor\", am5xy.XYCursor.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1\r\n  }));\r\n\r\n  var series1 = chart1.series.push(am5xy.ColumnSeries.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1,\r\n    valueYField: \"value\",\r\n    openValueYField: \"open\",\r\n    categoryXField: \"category\"\r\n  }));\r\n\r\n  series1.columns.template.setAll({\r\n    templateField: \"columnConfig\",\r\n    strokeOpacity: 0\r\n  });\r\n\r\n  series1.bullets.push(function() {\r\n    return am5.Bullet.new(root1, {\r\n      sprite: am5.Label.new(root1, {\r\n        text: \"{displayValue}\",\r\n        centerY: am5.p50,\r\n        centerX: am5.p50,\r\n        populateText: true\r\n      })\r\n    });\r\n  });\r\n\r\n  var stepSeries1 = chart1.series.push(am5xy.StepLineSeries.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1,\r\n    valueYField: \"stepValue\",\r\n    categoryXField: \"category\",\r\n    noRisers: true,\r\n    locationX: 0.65,\r\n    stroke: root1.interfaceColors.get(\"alternativeBackground\")\r\n  }));\r\n\r\n  stepSeries1.strokes.template.setAll({\r\n    strokeDasharray: [3, 3]\r\n  });\r\n\r\n  var colorSet1 = am5.ColorSet.new(root1, {});\r\n\r\n  fetch('AnalyticsIQ/customer_send_data.php')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      var data1 = [\r\n        { category: \"Total Send\", value: parseInt(data.donutData.total_send), open: 0, stepValue: parseInt(data.donutData.total_send), columnConfig: { fill: am5.color(0x4da6ff) }, displayValue: parseInt(data.donutData.total_send) },\r\n        { category: \"Pending\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), open: parseInt(data.donutData.total_send), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), columnConfig: { fill: am5.color(0xf4b943) }, displayValue: parseInt(data.donutData.pending) },\r\n        { category: \"Approved\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), columnConfig: { fill: am5.color(0x32CD32) }, displayValue: parseInt(data.donutData.approved) },\r\n        { category: \"Non Approved\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), columnConfig: { fill: am5.color(0xff0000) }, displayValue: parseInt(data.donutData.non_approved) },\r\n        { category: \"Emergency Use Only\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), columnConfig: { fill: am5.color(0xff8080) }, displayValue: parseInt(data.donutData.emergency_use_only) },\r\n        { category: \"Do Not Use\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), open: 0, columnConfig: { fill: am5.color(0xffff00) }, displayValue: parseInt(data.donutData.do_not_use) }\r\n      ];\r\n\r\n      xAxis1.data.setAll(data1);\r\n      series1.data.setAll(data1);\r\n      stepSeries1.data.setAll(data1);\r\n    })\r\n    .catch(error => console.error('Error fetching data:', error));\r\n});\r\n\r\n\r\n\r\n\r\n//RECEIVED Tab\r\n\r\nam5.ready(function() {\r\n  var root = am5.Root.new(\"receivedchartdiv\");\r\n\r\n  root.setThemes([ am5themes_Animated.new(root) ]);\r\n\r\n  var chart = root.container.children.push(\r\n      am5xy.XYChart.new(root, {\r\n          panX: false, // Disable horizontal panning\r\n          panY: false, // Disable vertical panning\r\n          wheelX: \"none\", // Disable wheel zooming on X axis\r\n          wheelY: \"none\", // Disable wheel zooming on Y axis\r\n          pinchZoomY: false // Disable pinch zoom on Y axis\r\n      })\r\n  );\r\n\r\n  var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(root, {}));\r\n  cursor.lineX.set(\"visible\", false); // Hide vertical cursor line\r\n\r\n  var yRenderer = am5xy.AxisRendererY.new(root, { minGridDistance: 30 });\r\n  var yAxis = chart.yAxes.push(\r\n      am5xy.CategoryAxis.new(root, {\r\n          maxDeviation: 0.3,\r\n          categoryField: \"name\",\r\n          renderer: yRenderer\r\n      })\r\n  );\r\n\r\n  var xAxis = chart.xAxes.push(\r\n      am5xy.ValueAxis.new(root, {\r\n          renderer: am5xy.AxisRendererX.new(root, {})\r\n      })\r\n  );\r\n\r\n  // Fetch data from PHP script using fetch API\r\n  fetch('AnalyticsIQ/customer_received_data.php')\r\n      .then(function(response) {\r\n          return response.json();\r\n      })\r\n      .then(function(data) {\r\n          // console.log('Data received:', data); // Log the received data\r\n\r\n          if (data.length === 0) {\r\n              console.error('No data received');\r\n              return;\r\n          }\r\n\r\n          // Aggregate data counts\r\n          var aggregatedData = [\r\n              { name: \"Compliance\", value: data.reduce((sum, item) => sum + parseFloat(item.compliance_percentage), 0), color: am5.color(0x00FF00) }, // Green\r\n              { name: \"Non Compliance\", value: data.reduce((sum, item) => sum + parseInt(item.d_non_compliance), 0), color: am5.color(0xFF0000) }, // Red\r\n              { name: \"Pending\", value: data.reduce((sum, item) => sum + parseInt(item.pending_count), 0), color: am5.color(0xFFA500) }, // Orange\r\n              { name: \"Approved\", value: data.reduce((sum, item) => sum + parseInt(item.approved_count), 0), color: am5.color(0x32CD32) }, // Lime Green\r\n              { name: \"Non Approved\", value: data.reduce((sum, item) => sum + parseInt(item.non_approved_count), 0), color: am5.color(0xFF6347) }, // Light Red\r\n              { name: \"Emergency Use Only\", value: data.reduce((sum, item) => sum + parseInt(item.emergency_use_only_count), 0), color: am5.color(0xFFC0CB) }, // Pink\r\n              { name: \"Do Not Use\", value: data.reduce((sum, item) => sum + parseInt(item.do_not_use_count), 0), color: am5.color(0xFFFF00) }, // Yellow\r\n              { name: \"Total Received\", value: data.reduce((sum, item) => sum + parseInt(item.received_count), 0), color: am5.color(0x4da6ff) } // Blue\r\n          ];\r\n\r\n          var series = chart.series.push(\r\n              am5xy.ColumnSeries.new(root, {\r\n                  xAxis: xAxis,\r\n                  yAxis: yAxis,\r\n                  valueXField: \"value\", // Change to valueXField for horizontal bar chart\r\n                  categoryYField: \"name\", // Change to categoryYField for horizontal bar chart\r\n                  tooltip: am5.Tooltip.new(root, {\r\n                      labelText: \"{name}: {valueX}\" // Change to valueX for horizontal bar chart\r\n                  })\r\n              })\r\n          );\r\n\r\n          series.columns.template.setAll({ cornerRadiusTL: 5, cornerRadiusBL: 5 }); // Adjust corner radius for horizontal bars\r\n          series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n              return target.dataItem.dataContext.color;\r\n          });\r\n\r\n          series.columns.template.adapters.add(\"stroke\", function(stroke, target) {\r\n              return target.dataItem.dataContext.color;\r\n          });\r\n\r\n          series.data.setAll(aggregatedData);\r\n          yAxis.data.setAll(aggregatedData); // Set data for yAxis instead of xAxis for horizontal bar chart\r\n\r\n      })\r\n      .catch(function(error) {\r\n          console.error('Error fetching data:', error);\r\n      });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n\r\n"]}