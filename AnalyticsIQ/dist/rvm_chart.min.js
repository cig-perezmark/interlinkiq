"use strict";function fetchData(){var t,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(fetch("AnalyticsIQ/fetch_rvm_data.php"));case 3:return t=e.sent,e.next=6,regeneratorRuntime.awrap(t.json());case 6:return a=e.sent,console.log("Fetched Data:",a),e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching data:",e.t0);case 14:case"end":return e.stop()}},null,null,[[0,11]])}function createCharts(e){console.log("Creating charts with data:",e),createDonutChart("filledOutChart",[{category:"Filled Out (".concat(e.filled_out.filled_out_1,")"),value:parseInt(e.filled_out.filled_out_1),isNotFilledOut:!1},{category:"Not Filled Out (".concat(e.filled_out.filled_out_0,")"),value:parseInt(e.filled_out.filled_out_0),isNotFilledOut:!0}],"Filled Out Status"),createDonutChart("signedChart",[{category:"Signed (".concat(e.signed.signed_1,")"),value:parseInt(e.signed.signed_1),isNotSigned:!1},{category:"Not Signed (".concat(e.signed.signed_0,")"),value:parseInt(e.signed.signed_0),isNotSigned:!0}],"Signed Status"),createBarChart("complianceChart",[{category:"Compliant",value:parseInt(e.compliance.compliance_1)},{category:"Non Compliant",value:parseInt(e.compliance.compliance_0),isNonCompliant:!0}],"Compliance Status"),createCurvedColumnChart("frequencyChart",[{category:"Daily",value:parseInt(e.frequency.frequency_0)},{category:"Weekly",value:parseInt(e.frequency.frequency_1)},{category:"Monthly",value:parseInt(e.frequency.frequency_2)},{category:"Quarterly",value:parseInt(e.frequency.frequency_3)},{category:"Biannual",value:parseInt(e.frequency.frequency_4)},{category:"Annually",value:parseInt(e.frequency.frequency_5)}],"Frequency")}function createDonutChart(n,r,e){am5.ready(function(){console.log("Creating donut chart in ".concat(n," with data:"),r);var e=am5.Root.new(n);e.setThemes([am5themes_Animated.new(e)]);var t=e.container.children.push(am5percent.PieChart.new(e,{innerRadius:am5.percent(50)})),a=t.series.push(am5percent.PieSeries.new(e,{valueField:"value",categoryField:"category",alignLabels:!1}));a.labels.template.setAll({textType:"circular",radius:10}),a.slices.template.setAll({strokeWidth:2,strokeOpacity:1,radialGradient:am5.RadialGradient.new(e,{stops:[{brighten:-.8},{brighten:-.3}]})}),a.slices.template.adapters.add("fill",function(e,t){return t.dataItem.dataContext.isNotFilledOut||t.dataItem.dataContext.isNotSigned?am5.color(16744576):e}),a.slices.template.adapters.add("stroke",function(e,t){return t.dataItem.dataContext.isNotFilledOut||t.dataItem.dataContext.isNotSigned?am5.color(16744576):e}),a.data.setAll(r),t.children.push(am5.Legend.new(e,{centerX:am5.percent(50),x:am5.percent(50),y:am5.percent(1),layout:e.horizontalLayout})).data.setAll(a.dataItems)})}function createBarChart(i,s,c){am5.ready(function(){console.log("Creating bar chart in ".concat(i," with data:"),s);var e=am5.Root.new(i);e.setThemes([am5themes_Animated.new(e)]);var a=e.container.children.push(am5xy.XYChart.new(e,{panX:!1,panY:!1,wheelX:"none",wheelY:"none",pinchZoomX:!1}));a.set("cursor",am5xy.XYCursor.new(e,{})).lineY.set("visible",!1);var t=am5xy.AxisRendererX.new(e,{minGridDistance:30}),n=a.xAxes.push(am5xy.CategoryAxis.new(e,{maxDeviation:.3,categoryField:"category",renderer:t,tooltip:am5.Tooltip.new(e,{})}));t.labels.template.setAll({rotation:-45,centerY:am5.p50,centerX:0});var r=a.yAxes.push(am5xy.ValueAxis.new(e,{renderer:am5xy.AxisRendererY.new(e,{})})),o=a.series.push(am5xy.ColumnSeries.new(e,{name:c,xAxis:n,yAxis:r,valueYField:"value",sequencedInterpolation:!0,categoryXField:"category",tooltip:am5.Tooltip.new(e,{labelText:"{valueY}"})}));o.columns.template.setAll({cornerRadiusTL:5,cornerRadiusTR:5}),o.columns.template.adapters.add("fill",function(e,t){return t.dataItem.dataContext.isNonCompliant?am5.color(16744576):a.get("colors").getIndex(o.columns.indexOf(t))}),o.columns.template.adapters.add("stroke",function(e,t){return t.dataItem.dataContext.isNonCompliant?am5.color(16744576):a.get("colors").getIndex(o.columns.indexOf(t))}),n.data.setAll(s),o.data.setAll(s);var l=a.children.push(am5.Legend.new(e,{centerX:am5.percent(50),x:am5.percent(50),y:am5.percent(-2),layout:e.horizontalLayout}));l.data.setAll(o.dataItems),l.labels.template.setAll({text:"{categoryX}: {valueY}"}),o.appear(1e3),a.appear(1e3,100)})}function createCurvedColumnChart(i,s,c){am5.ready(function(){console.log("Creating curved column chart in ".concat(i," with data:"),s);var e=am5.Root.new(i);e.setThemes([am5themes_Animated.new(e)]);var a=e.container.children.push(am5xy.XYChart.new(e,{panX:!1,panY:!1,wheelX:"none",wheelY:"none",pinchZoomX:!1,pinchZoomY:!1}));a.set("zoomOutButton",!1),a.set("cursor",am5xy.XYCursor.new(e,{behavior:"none"})).lineY.set("visible",!1);var t=am5xy.AxisRendererX.new(e,{minGridDistance:30}),n=a.xAxes.push(am5xy.CategoryAxis.new(e,{maxDeviation:.3,categoryField:"category",renderer:t,tooltip:am5.Tooltip.new(e,{})}));t.labels.template.setAll({rotation:-45,centerY:am5.p50,centerX:0});var r=a.yAxes.push(am5xy.ValueAxis.new(e,{renderer:am5xy.AxisRendererY.new(e,{})})),o=a.series.push(am5xy.ColumnSeries.new(e,{name:c,xAxis:n,yAxis:r,valueYField:"value",sequencedInterpolation:!0,categoryXField:"category",tooltip:am5.Tooltip.new(e,{labelText:"{valueY}"})}));o.columns.template.setAll({cornerRadiusTL:10,cornerRadiusTR:10,cornerRadiusBL:10,cornerRadiusBR:10}),o.columns.template.adapters.add("fill",function(e,t){return a.get("colors").getIndex(o.columns.indexOf(t))}),o.columns.template.adapters.add("stroke",function(e,t){return a.get("colors").getIndex(o.columns.indexOf(t))}),n.data.setAll(s),o.data.setAll(s);var l=a.children.push(am5.Legend.new(e,{centerX:am5.percent(50),x:am5.percent(50),y:am5.percent(-2),layout:e.horizontalLayout}));l.data.setAll(o.dataItems),l.labels.template.setAll({text:"{categoryX}: {valueY}"}),o.appear(1e3),a.appear(1e3,100)})}am5.ready(function(){var e=am5.Root.new("chartdiv");e.setThemes([am5themes_Animated.new(e)]);var n=e.container.children.push(am5percent.PieChart.new(e,{layout:e.verticalLayout})).series.push(am5percent.PieSeries.new(e,{valueField:"value",categoryField:"category",alignLabels:!1,labels:{template:{textType:"circular",inside:!0,radius:30}}}));n.data.setAll([{category:"No Data",value:1}]);var r={filled_out:["Properly Filled Out","Not Filled Out"],signed:["Properly Signed","Not Properly Signed"],compliance:["Compliant","Non-Compliant"],frequency:["Daily","Weekly","Monthly","Quarterly","Biannual","Annually"],assigned_count:[]};function t(e){e.dataTransfer.setData("text",e.target.getAttribute("data-field"))}function a(e){o(e.target.getAttribute("data-field"))}function o(t){$.ajax({url:"AnalyticsIQ/rvm_data.php",method:"GET",data:{field:t},dataType:"json",success:function(e){!function(e,t){document.getElementById("initial-message").style.display="none",n.data.clear();var a=[];"filled_out"===e||"signed"===e||"compliance"===e?(a.push({category:r[e][0]+" ("+t[0].count_1+")",value:t[0].count_1}),a.push({category:r[e][1]+" ("+t[0].count_0+")",value:t[0].count_0})):"frequency"===e?(a.push({category:r[e][0]+" ("+t[0].daily+")",value:t[0].daily}),a.push({category:r[e][1]+" ("+t[0].weekly+")",value:t[0].weekly}),a.push({category:r[e][2]+" ("+t[0].monthly+")",value:t[0].monthly}),a.push({category:r[e][3]+" ("+t[0].quarterly+")",value:t[0].quarterly}),a.push({category:r[e][4]+" ("+t[0].biannual+")",value:t[0].biannual}),a.push({category:r[e][5]+" ("+t[0].annually+")",value:t[0].annually})):"assigned_count"===e&&t.forEach(function(e){a.push({category:e.full_name+" ("+e.assigned_count+")",value:e.assigned_count})});n.data.setAll(a)}(t,e)},error:function(e,t,a){console.error("AJAX Error: "+t+a)}})}document.querySelectorAll(".draggable").forEach(function(e){e.addEventListener("dragstart",t),e.addEventListener("click",a)}),document.getElementById("chart-container").addEventListener("dragover",function(e){e.preventDefault()}),document.getElementById("chart-container").addEventListener("drop",function(e){e.preventDefault(),o(e.dataTransfer.getData("text"))})}),window.onload=function(){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetchData());case 2:(t=e.sent)&&createCharts(t);case 4:case"end":return e.stop()}})},document.addEventListener("DOMContentLoaded",function(e){fetch("AnalyticsIQ/assigned_to_data.php").then(function(e){return e.json()}).then(function(n){return n.error?(console.error(n.error),void(document.getElementById("assignedtochart").innerHTML="<p style='font-size: 20px; text-align: center;'>No data available to display.</p>")):(console.log("Chart Data:",n),0===n.length?(console.log("No data available for the chart."),void(document.getElementById("assignedtochart").innerHTML="<p style='font-size: 20px; text-align: center;'>No data available to display.</p>")):void am5.ready(function(){var e=am5.Root.new("assignedtochart");e.setThemes([am5themes_Animated.new(e)]);var t=e.container.children.push(am5percent.PieChart.new(e,{layout:e.verticalLayout})),a=t.series.push(am5percent.PieSeries.new(e,{name:"Assigned Forms",valueField:"assigned_forms",categoryField:"employee",innerRadius:0}));a.data.setAll(n),a.slices.template.setAll({tooltipText:"{category}: {value} forms",tooltipY:0,tooltipX:0}),t.children.push(am5.Legend.new(e,{})).data.setAll(a.dataItems),a.appear(1e3,100),t.appear(1e3,100)}))}).catch(function(e){console.error("Error fetching data:",e),document.getElementById("assignedtochart").innerHTML="<p style='font-size: 20px; text-align: center;'>Error fetching data.</p>"})});
//# sourceMappingURL=rvm_chart.min.js.map
