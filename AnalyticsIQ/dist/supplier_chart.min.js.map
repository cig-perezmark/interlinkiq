{"version":3,"sources":["supplier_chart.js"],"names":["currentRoot","complianceRoot","materialsRoot","auditRoot","displayChart","data","forEach","root","document","querySelector","innerText","vendor_name","am5","Root","setThemes","am5themes_Animated","chart","container","children","push","am5xy","XYChart","panY","set","XYCursor","wheelY","lineY","behavior","xAxes","CategoryAxis","categoryField","renderer","AxisRendererX","minGridDistance","ValueAxis","AxisRendererY","xAxis","yAxis","centerY","p50","get","p100","centerX","name","series","totalDocuments","chartData","value","document_count","document_other_count","color","category","non_expired","expired","nearly_expired_30","nearly_expired_60","nearly_expired_90","setAll","fill","target","dataItem","dataContext","strokeOpacity","adapters","add","template","stroke","columns","display","w","getPrivate","h","bezierCurveTo","width","percent","appear","am5percent","PieChart","radius","PieSeries","compliant_count","non_compliant_count","tooltipText","valueField","colors","innerRadius","complianceSeries","ColorSet","slices","active_material_count","inactive_material_count","materialsChart","materialsSeries","labels","seriesContainer","Label","textAlign","fontWeight","annual_review_count","parseDate","audit_report_date","trim","audit_report_duration","calculateDuration","audit_report_end_date","audit_certificate_date","totalLabel","audit_corrective_action_start","material_count","audit_action_date","fontSize","audit_action_end_date","reviewed_start","reviewed_date","reviewed_due","length","auditData","fieldName","isDuration","stacked","auditChart","ColumnSeries","auditXAxis","valueYField","categoryXField","interfaceColors","fillOpacity","duration","text","bullets","Bullet","locationY","verticalLayout","populateText","total_audits","audit_report_start","audit_certificate_start","audit_certificate_duration","legend","Legend","x","marginTop","yAxes","opposite","makeSeries","auditYAxis","auditYAxis2","err","log","modal","dateString","_dateString$split$map2","_slicedToArray","split","map","Number","month","day","year","Date","startDate","endDate","start","$","on","e","id","relatedTarget","fetch","method","headers","end","then","response","ok","Error","statusText","json","error","console","ready","root1","reduce","panX","xRenderer1","minorGridEnabled","maxDeviation","tooltip","Tooltip","location","yAxis1","chart1","min","series1","categoryYField","xAxis1","cornerRadiusTL","cornerRadiusBL","templateField","aggregatedData","sprite","chart2","layout","stepSeries1","strokes","series2","parseInt","lineData","data1","donutData","total_send","open","stepValue","columnConfig","displayValue","first_and_fifteenth","pending","approved","non_approved","once_per_month","emergency_use_only","do_not_use","wheelX","startAngle","cursor","xRenderer","forceHidden","lineX","max","maxVal","strictMinMax","numberFormat","yRenderer","sum","item","parseFloat","compliance_percentage","d_non_compliance","pending_count","approved_count","non_approved_count","emergency_use_only_count","cornerRadius","do_not_use_count","received_count","labelText","totalRequirements","requirementData","columnSettings","root2","full","activeMaterialsValue","inactiveMaterialsValue","materialData","totalMaterials","once_per_week","once_per_year","createChart","rootElementId","am5radar","RadarChart","endAngle","RadarCursor","AxisRendererCircular","grid","AxisRendererRadial","RadarColumnSeries","clustered","valueXField","total_requirements","complianceValue","compliance_count","nonComplianceValue","non_compliance_count","total_materials","total_active_materials","total_inactive_materials"],"mappings":"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","file":"supplier_chart.min.js","sourcesContent":["//Supplier Requirements, Materials, Audit & Review for Modal Analytics\r\n\r\n\r\nlet currentRoot = null;\r\nlet complianceRoot = null;\r\nlet materialsRoot = null;\r\nlet auditRoot = null;\r\n\r\nfunction displayChart(data) {\r\n    // Dispose of the existing chart instances if they exist\r\n    [currentRoot, complianceRoot, materialsRoot, auditRoot].forEach(root => {\r\n        if (root) {\r\n            root.dispose();\r\n        }\r\n    });\r\n\r\n    // Update the modal title with the vendor's name\r\n    document.querySelector(\"#modalChart .modal-title\").innerText = \"Vendor's Name: \" + data.vendor_name;\r\n\r\n    // Create root element for requirement chart\r\n    currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n    currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n    var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n        panX: false,\r\n        panY: false,\r\n        wheelX: \"none\",\r\n        wheelY: \"none\",\r\n        pinchZoomX: false\r\n    }));\r\n\r\n    var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n        behavior: \"none\"\r\n    }));\r\n    cursor.lineY.set(\"visible\", false);\r\n\r\n    var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n        categoryField: \"category\",\r\n        renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n    }));\r\n\r\n    var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n        renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n    }));\r\n\r\n    xAxis.get(\"renderer\").labels.template.setAll({\r\n        rotation: -30,\r\n        centerY: am5.p50,\r\n        centerX: am5.p100\r\n    });\r\n\r\n    var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n        name: \"Requirements\",\r\n        xAxis: xAxis,\r\n        yAxis: yAxis,\r\n        valueYField: \"value\",\r\n        categoryXField: \"category\"\r\n    }));\r\n\r\n    const totalDocuments = data.document_count + data.document_other_count;\r\n    const chartData = [\r\n        { category: \"Requirements\", value: totalDocuments, color: am5.color(0x4da6ff) },\r\n        { category: \"Non Expired\", value: data.non_expired, color: am5.color(0x32CD32) },\r\n        { category: \"Expired\", value: data.expired, color: am5.color(0xFF0000) },\r\n        { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(0xff3434) },\r\n        { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(0xffb733) },\r\n        { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(0xFFD700) }\r\n    ];\r\n    series.data.setAll(chartData);\r\n    xAxis.data.setAll(chartData);\r\n\r\n    series.columns.template.setAll({\r\n        tooltipText: \"{category}: {valueY}\",\r\n        fill: function(target) {\r\n            return target.dataItem.dataContext.color;\r\n        },\r\n        stroke: function(target) {\r\n            return target.dataItem.dataContext.color;\r\n        },\r\n        width: am5.percent(120),\r\n        fillOpacity: 0.8,\r\n        strokeOpacity: 0.8\r\n    });\r\n\r\n    series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n        return target.dataItem.dataContext.color;\r\n    });\r\n    series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n        return target.dataItem.dataContext.color;\r\n    });\r\n\r\n    series.columns.template.set(\"draw\", function(display, target) {\r\n        var w = target.getPrivate(\"width\", 0);\r\n        var h = target.getPrivate(\"height\", 0);\r\n        display.moveTo(0, h);\r\n        display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n        display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n    });\r\n\r\n    series.appear(1000);\r\n    chart.appear(1000, 100);\r\n\r\n    complianceRoot = am5.Root.new(\"complianceChartDiv\");\r\n    complianceRoot.setThemes([am5themes_Animated.new(complianceRoot)]);\r\n    var complianceChart = complianceRoot.container.children.push(am5percent.PieChart.new(complianceRoot, {\r\n        radius: am5.percent(65)  // Adjust the size of the pie chart\r\n    }));\r\n    var complianceSeries = complianceChart.series.push(am5percent.PieSeries.new(complianceRoot, {\r\n        valueField: \"value\",\r\n        categoryField: \"category\",\r\n        colors: am5.ColorSet.new(complianceRoot, {\r\n            colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n        })\r\n    }));\r\n    complianceSeries.data.setAll([\r\n        { category: \"Compliance\", value: data.compliant_count },\r\n        { category: \"Non-Compliance\", value: data.non_compliant_count }\r\n    ]);\r\n    complianceSeries.slices.template.setAll({\r\n        tooltipText: \"{category}: {value}\"\r\n    });\r\n\r\n    materialsRoot = am5.Root.new(\"materialsChartDiv\");\r\n    materialsRoot.setThemes([am5themes_Animated.new(materialsRoot)]);\r\n    var materialsChart = materialsRoot.container.children.push(am5percent.PieChart.new(materialsRoot, {\r\n        radius: am5.percent(65),  // Adjust the size of the donut chart\r\n        innerRadius: am5.percent(50)\r\n    }));\r\n    var materialsSeries = materialsChart.series.push(am5percent.PieSeries.new(materialsRoot, {\r\n        valueField: \"value\",\r\n        categoryField: \"category\",\r\n        colors: am5.ColorSet.new(materialsRoot, {\r\n            colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n        })\r\n    }));\r\n    materialsSeries.data.setAll([\r\n        { category: \"Active Material\", value: data.active_material_count },\r\n        { category: \"Inactive Material\", value: data.inactive_material_count }\r\n    ]);\r\n    materialsSeries.slices.template.setAll({\r\n        tooltipText: \"{category}: {value}\"\r\n    });\r\n    materialsSeries.labels.template.set(\"text\", \"[regular]{category}[/]\\n{value}\");\r\n\r\n    var totalLabel = materialsChart.seriesContainer.children.push(am5.Label.new(materialsRoot, {\r\n        text: `Materials\\n${data.material_count}`,\r\n        fontSize: 18,  // Adjust the size of the total label\r\n        centerX: am5.p50,\r\n        centerY: am5.p50,\r\n        populateText: true,\r\n        textAlign: \"center\",\r\n        fontWeight: \"bold\",  // Make the font bold\r\n        fill: am5.color(0x0000FF)  // Set the font color to blue\r\n    }));\r\n\r\n    // Integrate original audit chart script if audit_data exists\r\n    const auditData = [{\r\n        reviewed_by: data.reviewed_by,\r\n        annual_review_count: data.annual_review_count,\r\n        total_audits: data.total_audits,\r\n        audit_report_start: parseDate(data.audit_report_date.trim()),\r\n        audit_report_duration: calculateDuration(data.audit_report_date, data.audit_report_end_date),\r\n        audit_certificate_start: parseDate(data.audit_certificate_date.trim()),\r\n        audit_certificate_duration: calculateDuration(data.audit_certificate_date, data.audit_certificate_end_date),\r\n        audit_corrective_action_start: parseDate(data.audit_action_date.trim()),\r\n        audit_corrective_action_duration: calculateDuration(data.audit_action_date, data.audit_action_end_date),\r\n        reviewed_start: parseDate(data.reviewed_date.trim()),\r\n        reviewed_duration: calculateDuration(data.reviewed_date, data.reviewed_due)\r\n    }];\r\n\r\n    if (auditData.length > 0) {\r\n        am5.ready(function() {\r\n            try {\r\n                auditRoot = am5.Root.new(\"auditChartdiv\");\r\n\r\n                // Set themes\r\n                auditRoot.setThemes([am5themes_Animated.new(auditRoot)]);\r\n\r\n                // Create chart\r\n                var auditChart = auditRoot.container.children.push(am5xy.XYChart.new(auditRoot, {\r\n                    panX: false,\r\n                    panY: false,\r\n                    wheelX: \"none\",\r\n                    wheelY: \"none\",\r\n                    layout: auditRoot.verticalLayout,\r\n                    marginTop: 20 \r\n                }));\r\n\r\n                // Add legend\r\n                var legend = auditChart.children.push(\r\n                    am5.Legend.new(auditRoot, {\r\n                        centerX: am5.p50,\r\n                        x: am5.p50,\r\n                        marginTop: 20\r\n                    })\r\n                );\r\n\r\n                // Create axes\r\n                var auditXAxis = auditChart.xAxes.push(am5xy.CategoryAxis.new(auditRoot, {\r\n                    categoryField: \"reviewed_by\",\r\n                    renderer: am5xy.AxisRendererX.new(auditRoot, {\r\n                        cellStartLocation: 0.1,\r\n                        cellEndLocation: 0.9\r\n                    })\r\n                }));\r\n                auditXAxis.data.setAll(auditData);\r\n                auditXAxis.get(\"renderer\").labels.template.adapters.add(\"text\", function(text, target) {\r\n                    return \"Reviewed by: \" + text;\r\n                });\r\n                auditXAxis.get(\"renderer\").labels.template.setAll({\r\n                    fontSize: 16 \r\n                });\r\n\r\n                var auditYAxis = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n                    renderer: am5xy.AxisRendererY.new(auditRoot, {})\r\n                }));\r\n\r\n                var auditYAxis2 = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n                    renderer: am5xy.AxisRendererY.new(auditRoot, { opposite: true })\r\n                }));\r\n\r\n                function makeSeries(name, fieldName, color, isDuration, stacked, yAxis) {\r\n                    var series = auditChart.series.push(am5xy.ColumnSeries.new(auditRoot, {\r\n                        name: name,\r\n                        xAxis: auditXAxis,\r\n                        yAxis: yAxis,\r\n                        valueYField: fieldName,\r\n                        categoryXField: \"reviewed_by\",\r\n                        stacked: stacked,\r\n                        fill: color\r\n                    }));\r\n\r\n                    series.columns.template.setAll({\r\n                        tooltipText: isDuration ? \"{name}: {valueY} days\" : \"{name}: {valueY}\",\r\n                        width: am5.percent(90),\r\n                        strokeOpacity: 0,\r\n                        fillOpacity: 10,\r\n                    });\r\n\r\n                    if (isDuration) {\r\n                        series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n                            const duration = target.dataItem.get(\"valueY\");\r\n                            if (duration <= 30) return am5.color(0xFF0000);\r\n                            if (duration <= 60) return am5.color(0xFFA500);\r\n                            if (duration <= 90) return am5.color(0xFFD700);\r\n                            return am5.color(0x32CD32);\r\n                        });\r\n                    }\r\n\r\n                    series.data.setAll(auditData);\r\n                    series.appear();\r\n\r\n                    if (name !== \"Audit Report Duration\" && name !== \"Audit Certificate Duration\" && name !== \"Audit Corrective Action Duration\" && name !== \"Reviewed Duration\") {\r\n                        legend.data.push(series);\r\n                    }\r\n\r\n                    // Add label count on top of the bars\r\n                    series.bullets.push(function() {\r\n                        return am5.Bullet.new(auditRoot, {\r\n                            locationY: 0.5,\r\n                            sprite: am5.Label.new(auditRoot, {\r\n                                text: isDuration ? \"Duration: {valueY} days \\n\" : \"Start: {valueY} \\n\",\r\n                                fill: auditRoot.interfaceColors.get(\"alternativeText\"),\r\n                                centerY: am5.p50,\r\n                                centerX: am5.p50,\r\n                                populateText: true,\r\n                                adapters: {\r\n                                    text: function(text, target) {\r\n                                        var value = target.dataItem.get(\"valueY\");\r\n                                        return value != null ? text : \"\";\r\n                                    }\r\n                                }\r\n                            })\r\n                        });\r\n                    });\r\n\r\n                    return series;\r\n                }\r\n\r\n                // Create series for each date pair with start series first and then duration series\r\n                makeSeries(\"Audit Report Start\", \"audit_report_start\", am5.color(0x7c6ed3), false, false, auditYAxis);\r\n                makeSeries(\"Audit Report Duration\", \"audit_report_duration\", am5.color(0xFFD700), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Audit Certificate Start\", \"audit_certificate_start\", am5.color(0x0096FF), false, false, auditYAxis);\r\n                makeSeries(\"Audit Certificate Duration\", \"audit_certificate_duration\", am5.color(0x4A731C), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Audit Corrective Action Start\", \"audit_corrective_action_start\", am5.color(0xd981cd), false, false, auditYAxis);\r\n                makeSeries(\"Audit Corrective Action Duration\", \"audit_corrective_action_duration\", am5.color(0x883407), true, true, auditYAxis);\r\n\r\n                makeSeries(\"Reviewed Start\", \"reviewed_start\", am5.color(0xFA8072), false, false, auditYAxis);\r\n                makeSeries(\"Reviewed Duration\", \"reviewed_duration\", am5.color(0x32CD32), true, true, auditYAxis);\r\n\r\n                auditChart.appear(1000, 100);\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    $('#modalChart').modal('show');\r\n}\r\n\r\n// Helper function to parse date strings\r\nfunction parseDate(dateString) {\r\n    const [month, day, year] = dateString.split('/').map(Number);\r\n    return new Date(year, month - 1, day);\r\n}\r\n\r\n// Helper function to calculate duration between two dates\r\nfunction calculateDuration(startDate, endDate) {\r\n    const start = parseDate(startDate.trim());\r\n    const end = parseDate(endDate.trim());\r\n    const duration = (end - start) / (1000 * 60 * 60 * 24);\r\n    return duration;\r\n}\r\n\r\n// Event listener for when the modal is shown\r\n$('#modalChart').on('shown.bs.modal', function (e) {\r\n    var id = $(e.relatedTarget).data('id');\r\n    fetch('AnalyticsIQ/fetch_supplier_data.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        },\r\n        body: 'id=' + id\r\n    })\r\n    .then(response => {\r\n        if (!response.ok) {\r\n            throw new Error('Network response was not ok ' + response.statusText);\r\n        }\r\n        return response.json();\r\n    })\r\n    .then(data => {\r\n        console.log(data);  // Log data for debugging\r\n        displayChart(data);\r\n    })\r\n    .catch(error => {\r\n        console.error('Error fetching or processing data:', error);\r\n        alert('An error occurred while fetching the data. Please try again later.');\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\n//ORIGINAL\r\n\r\n// let currentRoot = null;\r\n// let complianceRoot = null;\r\n// let materialsRoot = null;\r\n// let auditRoot = null;\r\n\r\n// function displayChart(data) {\r\n//     // Dispose of the existing chart instances if they exist\r\n//     [currentRoot, complianceRoot, materialsRoot, auditRoot].forEach(root => {\r\n//         if (root) {\r\n//             root.dispose();\r\n//         }\r\n//     });\r\n\r\n//     // Update the modal title with the vendor's name\r\n//     document.querySelector(\"#modalChart .modal-title\").innerText = \"Vendor's Name: \" + data.vendor_name;\r\n\r\n//     // Create root element for requirement chart\r\n//     currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n//     currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n//     var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n//         panX: false,\r\n//         panY: false,\r\n//         wheelX: \"none\",\r\n//         wheelY: \"none\",\r\n//         pinchZoomX: false\r\n//     }));\r\n\r\n//     var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n//         behavior: \"none\"\r\n//     }));\r\n//     cursor.lineY.set(\"visible\", false);\r\n\r\n//     var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n//         categoryField: \"category\",\r\n//         renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n//     }));\r\n\r\n//     var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n//         renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n//     }));\r\n\r\n//     xAxis.get(\"renderer\").labels.template.setAll({\r\n//         rotation: -30,\r\n//         centerY: am5.p50,\r\n//         centerX: am5.p100\r\n//     });\r\n\r\n//     var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n//         name: \"Requirements\",\r\n//         xAxis: xAxis,\r\n//         yAxis: yAxis,\r\n//         valueYField: \"value\",\r\n//         categoryXField: \"category\"\r\n//     }));\r\n\r\n//     const totalDocuments = data.document_count + data.document_other_count;\r\n//     const chartData = [\r\n//         { category: \"Requirements\", value: totalDocuments, color: am5.color(0x4da6ff) },\r\n//         { category: \"Non Expired\", value: data.non_expired, color: am5.color(0x32CD32) },\r\n//         { category: \"Expired\", value: data.expired, color: am5.color(0xFF0000) },\r\n//         { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(0xff3434) },\r\n//         { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(0xffb733) },\r\n//         { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(0xFFD700) }\r\n//     ];\r\n//     series.data.setAll(chartData);\r\n//     xAxis.data.setAll(chartData);\r\n\r\n//     series.columns.template.setAll({\r\n//         tooltipText: \"{category}: {valueY}\",\r\n//         fill: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         stroke: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         width: am5.percent(120),\r\n//         fillOpacity: 0.8,\r\n//         strokeOpacity: 0.8\r\n//     });\r\n\r\n//     series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n//     series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     series.columns.template.set(\"draw\", function(display, target) {\r\n//         var w = target.getPrivate(\"width\", 0);\r\n//         var h = target.getPrivate(\"height\", 0);\r\n//         display.moveTo(0, h);\r\n//         display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n//         display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n//     });\r\n\r\n//     series.appear(1000);\r\n//     chart.appear(1000, 100);\r\n\r\n//     complianceRoot = am5.Root.new(\"complianceChartDiv\");\r\n//     complianceRoot.setThemes([am5themes_Animated.new(complianceRoot)]);\r\n//     var complianceChart = complianceRoot.container.children.push(am5percent.PieChart.new(complianceRoot, {}));\r\n//     var complianceSeries = complianceChart.series.push(am5percent.PieSeries.new(complianceRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(complianceRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n//         })\r\n//     }));\r\n//     complianceSeries.data.setAll([\r\n//         { category: \"Compliance\", value: data.compliant_count },\r\n//         { category: \"Non-Compliance\", value: data.non_compliant_count }\r\n//     ]);\r\n//     complianceSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\"\r\n//     });\r\n\r\n//     materialsRoot = am5.Root.new(\"materialsChartDiv\");\r\n//     materialsRoot.setThemes([am5themes_Animated.new(materialsRoot)]);\r\n//     var materialsChart = materialsRoot.container.children.push(am5percent.PieChart.new(materialsRoot, {\r\n//         innerRadius: am5.percent(50)\r\n//     }));\r\n//     var materialsSeries = materialsChart.series.push(am5percent.PieSeries.new(materialsRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(materialsRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n//         })\r\n//     }));\r\n//     materialsSeries.data.setAll([\r\n//         { category: \"Active Material\", value: data.active_material_count },\r\n//         { category: \"Inactive Material\", value: data.inactive_material_count }\r\n//     ]);\r\n//     materialsSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\"\r\n//     });\r\n//     materialsSeries.labels.template.set(\"text\", \"[bold]{category}[/]\\n{value}\");\r\n\r\n//     var totalLabel = materialsChart.seriesContainer.children.push(am5.Label.new(materialsRoot, {\r\n//         text: `Total materials\\n${data.material_count}`,\r\n//         fontSize: 20,\r\n//         centerX: am5.p50,\r\n//         centerY: am5.p50,\r\n//         populateText: true,\r\n//         textAlign: \"center\"\r\n//     }));\r\n\r\n//     // Integrate original audit chart script if audit_data exists\r\n//     const auditData = [{\r\n//         reviewed_by: data.reviewed_by,\r\n//         annual_review_count: data.annual_review_count,\r\n//         total_audits: data.total_audits,\r\n//         audit_report_start: parseDate(data.audit_report_date.trim()),\r\n//         audit_report_duration: calculateDuration(data.audit_report_date, data.audit_report_end_date),\r\n//         audit_certificate_start: parseDate(data.audit_certificate_date.trim()),\r\n//         audit_certificate_duration: calculateDuration(data.audit_certificate_date, data.audit_certificate_end_date),\r\n//         audit_corrective_action_start: parseDate(data.audit_action_date.trim()),\r\n//         audit_corrective_action_duration: calculateDuration(data.audit_action_date, data.audit_action_end_date),\r\n//         reviewed_start: parseDate(data.reviewed_date.trim()),\r\n//         reviewed_duration: calculateDuration(data.reviewed_date, data.reviewed_due)\r\n//     }];\r\n\r\n\r\n    \r\n//     if (auditData.length > 0) {\r\n//       am5.ready(function() {\r\n//           try {\r\n//               auditRoot = am5.Root.new(\"auditChartdiv\");\r\n  \r\n//               // Set themes\r\n//               auditRoot.setThemes([am5themes_Animated.new(auditRoot)]);\r\n  \r\n//               // Create chart\r\n//               var auditChart = auditRoot.container.children.push(am5xy.XYChart.new(auditRoot, {\r\n//                   panX: false,\r\n//                   panY: false,\r\n//                   wheelX: \"none\",\r\n//                   wheelY: \"none\",\r\n//                   layout: auditRoot.verticalLayout,\r\n//                   marginTop: 20 // Adjust this value for more/less space\r\n//               }));\r\n  \r\n//               // Add legend\r\n//               var legend = auditChart.children.push(\r\n//                   am5.Legend.new(auditRoot, {\r\n//                       centerX: am5.p50,\r\n//                       x: am5.p50,\r\n//                       marginTop: 20\r\n//                   })\r\n//               );\r\n  \r\n//               // Create axes\r\n//               var auditXAxis = auditChart.xAxes.push(am5xy.CategoryAxis.new(auditRoot, {\r\n//                   categoryField: \"reviewed_by\",\r\n//                   renderer: am5xy.AxisRendererX.new(auditRoot, {\r\n//                       cellStartLocation: 0.1,\r\n//                       cellEndLocation: 0.9\r\n//                   })\r\n//               }));\r\n//               auditXAxis.data.setAll(auditData);\r\n//               auditXAxis.get(\"renderer\").labels.template.adapters.add(\"text\", function(text, target) {\r\n//                   return \"Reviewed by: \" + text;\r\n//               });\r\n//               auditXAxis.get(\"renderer\").labels.template.setAll({\r\n//                   fontSize: 16 \r\n//               });\r\n  \r\n//               var auditYAxis = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n//                   renderer: am5xy.AxisRendererY.new(auditRoot, {})\r\n//               }));\r\n  \r\n//               var auditYAxis2 = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n//                   renderer: am5xy.AxisRendererY.new(auditRoot, { opposite: true })\r\n//               }));\r\n  \r\n//               function makeSeries(name, fieldName, color, isDuration, stacked, yAxis) {\r\n//                   var series = auditChart.series.push(am5xy.ColumnSeries.new(auditRoot, {\r\n//                       name: name,\r\n//                       xAxis: auditXAxis,\r\n//                       yAxis: yAxis,\r\n//                       valueYField: fieldName,\r\n//                       categoryXField: \"reviewed_by\",\r\n//                       stacked: stacked,\r\n//                       fill: color\r\n//                   }));\r\n  \r\n//                   series.columns.template.setAll({\r\n//                       tooltipText: isDuration ? \"{name}: {valueY} days\" : \"{name}: {valueY}\",\r\n//                       width: am5.percent(90),\r\n//                       strokeOpacity: 0,\r\n//                       fillOpacity: 0.9,\r\n//                   });\r\n  \r\n//                   if (isDuration) {\r\n//                       series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n//                           const duration = target.dataItem.get(\"valueY\");\r\n//                           if (duration <= 30) return am5.color(0xFF0000);\r\n//                           if (duration <= 60) return am5.color(0xFFA500);\r\n//                           if ( duration <= 90) return am5.color(0xFFD700);\r\n//                           return am5.color(0x32CD32);\r\n//                       });\r\n//                   }\r\n  \r\n//                   series.data.setAll(auditData);\r\n//                   series.appear();\r\n  \r\n//                   legend.data.push(series);\r\n  \r\n//                   return series;\r\n//               }\r\n  \r\n//               // Create series for each date pair with start series first and then duration series\r\n//               makeSeries(\"Audit Report Start\", \"audit_report_start\", am5.color(0x2c4e31), false, false, auditYAxis);\r\n//               makeSeries(\"Audit Report Duration\", \"audit_report_duration\", am5.color(0xFFD700), true, true, auditYAxis);\r\n  \r\n//               makeSeries(\"Audit Certificate Start\", \"audit_certificate_start\", am5.color(0x3e6e45), false, false, auditYAxis);\r\n//               makeSeries(\"Audit Certificate Duration\", \"audit_certificate_duration\", am5.color(0x4A731C), true, true, auditYAxis);\r\n  \r\n//               makeSeries(\"Audit Corrective Action Start\", \"audit_corrective_action_start\", am5.color(0x518f5a), false, false, auditYAxis);\r\n//               makeSeries(\"Audit Corrective Action Duration\", \"audit_corrective_action_duration\", am5.color(0x883407), true, true, auditYAxis);\r\n  \r\n//               makeSeries(\"Reviewed Start\", \"reviewed_start\", am5.color(0x097969), false, false, auditYAxis);\r\n//               makeSeries(\"Reviewed Duration\", \"reviewed_duration\", am5.color(0x32CD32), true, true, auditYAxis);\r\n  \r\n//               makeSeries(\"Annual Review\", \"annual_review_count\", am5.color(0x0096FF), false, false, auditYAxis2);\r\n//               makeSeries(\"Audit\", \"total_audits\", am5.color(0x87CEEB), false, false, auditYAxis2);\r\n  \r\n//               legend.data.setAll(auditChart.series.values);\r\n  \r\n//               auditChart.appear(1000, 100);\r\n//           } catch (err) {\r\n//               console.log(err);\r\n//           }\r\n//       });\r\n//   }\r\n  \r\n  \r\n\r\n//     $('#modalChart').modal('show');\r\n// }\r\n\r\n\r\n// // Helper function to parse date strings\r\n// function parseDate(dateString) {\r\n//     const [month, day, year] = dateString.split('/').map(Number);\r\n//     return new Date(year, month - 1, day);\r\n// }\r\n\r\n// // Helper function to calculate duration between two dates\r\n// function calculateDuration(startDate, endDate) {\r\n//     const start = parseDate(startDate.trim());\r\n//     const end = parseDate(endDate.trim());\r\n//     const duration = (end - start) / (1000 * 60 * 60 * 24);\r\n//     return duration;\r\n// }\r\n\r\n// // Event listener for when the modal is shown\r\n// $('#modalChart').on('shown.bs.modal', function (e) {\r\n//     var id = $(e.relatedTarget).data('id');\r\n//     fetch('AnalyticsIQ/fetch_supplier_data.php', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//             'Content-Type': 'application/x-www-form-urlencoded'\r\n//         },\r\n//         body: 'id=' + id\r\n//     })\r\n//     .then(response => {\r\n//         if (!response.ok) {\r\n//             throw new Error('Network response was not ok ' + response.statusText);\r\n//         }\r\n//         return response.json();\r\n//     })\r\n//     .then(data => {\r\n//         console.log(data);  // Log data for debugging\r\n//         displayChart(data);\r\n//     })\r\n//     .catch(error => {\r\n//         console.error('Error fetching or processing data:', error);\r\n//         alert('An error occurred while fetching the data. Please try again later.');\r\n//     });\r\n// });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// let currentRoot = null;\r\n// let complianceRoot = null;\r\n// let materialsRoot = null;\r\n// let auditRoot = null;\r\n\r\n// function displayChart(data) {\r\n//     // Dispose of the existing chart instances if they exist\r\n//     [currentRoot, complianceRoot, materialsRoot, auditRoot].forEach(root => {\r\n//         if (root) {\r\n//             root.dispose();\r\n//             root = null;\r\n//         }\r\n//     });\r\n\r\n//     // Update the modal title with the vendor's name\r\n//     document.querySelector(\"#modalChart .modal-title\").innerText = \"Vendor's Name: \" + data.vendor_name;\r\n\r\n//     // Create root element for requirement chart\r\n//     currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n//     currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n//     var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n//         panX: false,\r\n//         panY: false,\r\n//         wheelX: \"none\",\r\n//         wheelY: \"none\",\r\n//         pinchZoomX: false\r\n//     }));\r\n\r\n//     var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n//         behavior: \"none\"\r\n//     }));\r\n//     cursor.lineY.set(\"visible\", false);\r\n\r\n//     var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n//         categoryField: \"category\",\r\n//         renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n//     }));\r\n\r\n//     var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n//         renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n//     }));\r\n\r\n//     xAxis.get(\"renderer\").labels.template.setAll({\r\n//         rotation: -30,\r\n//         centerY: am5.p50,\r\n//         centerX: am5.p100\r\n//     });\r\n\r\n//     var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n//         name: \"Requirements\",\r\n//         xAxis: xAxis,\r\n//         yAxis: yAxis,\r\n//         valueYField: \"value\",\r\n//         categoryXField: \"category\"\r\n//     }));\r\n\r\n//     const totalDocuments = data.document_count + data.document_other_count;\r\n//     const chartData = [\r\n//         { category: \"Requirements\", value: totalDocuments, color: am5.color(0x4da6ff) },\r\n//         { category: \"Non Expired\", value: data.non_expired, color: am5.color(0x32CD32) },\r\n//         { category: \"Expired\", value: data.expired, color: am5.color(0xFF0000) },\r\n//         { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(0xff3434) },\r\n//         { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(0xffb733) },\r\n//         { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(0xFFD700) }\r\n//     ];\r\n//     series.data.setAll(chartData);\r\n//     xAxis.data.setAll(chartData);\r\n\r\n//     series.columns.template.setAll({\r\n//         tooltipText: \"{category}: {valueY}\",\r\n//         fill: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         stroke: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         width: am5.percent(120),\r\n//         fillOpacity: 0.8,\r\n//         strokeOpacity: 0.8\r\n//     });\r\n\r\n//     series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n//     series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     series.columns.template.set(\"draw\", function(display, target) {\r\n//         var w = target.getPrivate(\"width\", 0);\r\n//         var h = target.getPrivate(\"height\", 0);\r\n//         display.moveTo(0, h);\r\n//         display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n//         display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n//     });\r\n\r\n//     series.appear(1000);\r\n//     chart.appear(1000, 100);\r\n\r\n//     complianceRoot = am5.Root.new(\"complianceChartDiv\");\r\n//     complianceRoot.setThemes([am5themes_Animated.new(complianceRoot)]);\r\n//     var complianceChart = complianceRoot.container.children.push(am5percent.PieChart.new(complianceRoot, {}));\r\n//     var complianceSeries = complianceChart.series.push(am5percent.PieSeries.new(complianceRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(complianceRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n//         })\r\n//     }));\r\n//     complianceSeries.data.setAll([\r\n//         { category: \"Compliance\", value: data.compliant_count },\r\n//         { category: \"Non-Compliance\", value: data.non_compliant_count }\r\n//     ]);\r\n//     complianceSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\"\r\n//     });\r\n\r\n//     materialsRoot = am5.Root.new(\"materialsChartDiv\");\r\n//     materialsRoot.setThemes([am5themes_Animated.new(materialsRoot)]);\r\n//     var materialsChart = materialsRoot.container.children.push(am5percent.PieChart.new(materialsRoot, {\r\n//         innerRadius: am5.percent(50)\r\n//     }));\r\n//     var materialsSeries = materialsChart.series.push(am5percent.PieSeries.new(materialsRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(materialsRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)]\r\n//         })\r\n//     }));\r\n//     materialsSeries.data.setAll([\r\n//         { category: \"Active Material\", value: data.active_material_count },\r\n//         { category: \"Inactive Material\", value: data.inactive_material_count }\r\n//     ]);\r\n//     materialsSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\"\r\n//     });\r\n//     materialsSeries.labels.template.set(\"text\", \"[bold]{category}[/]\\n{value}\");\r\n\r\n//     var totalLabel = materialsChart.seriesContainer.children.push(am5.Label.new(materialsRoot, {\r\n//         text: `Total materials\\n${data.material_count}`,\r\n//         fontSize: 20,\r\n//         centerX: am5.p50,\r\n//         centerY: am5.p50,\r\n//         populateText: true,\r\n//         textAlign: \"center\"\r\n//     }));\r\n\r\n//     // Integrate original audit chart script if audit_data exists\r\n//     if (data.audit_data && data.audit_data.length > 0) {\r\n//         // Clean data to remove extra spaces and format correctly\r\n//         const auditData = data.audit_data.map(item => {\r\n//             const auditReportStart = new Date(item['Audit Report Date'].trim());\r\n//             const auditReportEnd = new Date(item['Audit Report End Date'].trim());\r\n//             const auditCertificateStart = new Date(item['Audit Certificate Date'].trim());\r\n//             const auditCertificateEnd = new Date(item['Audit Certificate End Date'].trim());\r\n//             const auditCorrectiveActionStart = new Date(item['Audit Corrective Action Date'].trim());\r\n//             const auditCorrectiveActionEnd = new Date(item['Audit Corrective Action End Date'].trim());\r\n//             const reviewedStart = new Date(item['Reviewed Date'].trim());\r\n//             const reviewedEnd = new Date(item['Reviewed Due'].trim());\r\n\r\n//             return {\r\n//                 reviewed_by: item.reviewed_by.trim(),\r\n//                 annual_review_count: parseInt(item.annual_review_count, 10),\r\n//                 total_audits: parseInt(item.total_audits, 10),\r\n//                 audit_report_start: auditReportStart,\r\n//                 audit_report_duration: (auditReportEnd - auditReportStart) / (1000 * 60 * 60 * 24),\r\n//                 audit_certificate_start: auditCertificateStart,\r\n//                 audit_certificate_duration: (auditCertificateEnd - auditCertificateStart) / (1000 * 60 * 60 * 24),\r\n//                 audit_corrective_action_start: auditCorrectiveActionStart,\r\n//                 audit_corrective_action_duration: (auditCorrectiveActionEnd - auditCorrectiveActionStart) / (1000 * 60 * 60 * 24),\r\n//                 reviewed_start: reviewedStart,\r\n//                 reviewed_duration: (reviewedEnd - reviewedStart) / (1000 * 60 * 60 * 24)\r\n//             };\r\n//         });\r\n\r\n//         am5.ready(function() {\r\n//             try {\r\n//                 auditRoot = am5.Root.new(\"auditChartdiv\");\r\n\r\n//                 // Set themes\r\n//                 auditRoot.setThemes([am5themes_Animated.new(auditRoot)]);\r\n\r\n//                 // Create chart\r\n//                 var auditChart = auditRoot.container.children.push(am5xy.XYChart.new(auditRoot, {\r\n//                     panX: false,\r\n//                     panY: false,\r\n//                     wheelX: \"none\",\r\n//                     wheelY: \"none\",\r\n//                     layout: auditRoot.verticalLayout\r\n//                 }));\r\n\r\n//                 // Add legend\r\n//                 var legend = auditChart.children.push(\r\n//                     am5.Legend.new(auditRoot, {\r\n//                         centerX: am5.p50,\r\n//                         x: am5.p50,\r\n//                         marginTop: 20\r\n//                     })\r\n//                 );\r\n\r\n//                 // Create axes\r\n//                 var auditXAxis = auditChart.xAxes.push(am5xy.CategoryAxis.new(auditRoot, {\r\n//                     categoryField: \"reviewed_by\",\r\n//                     renderer: am5xy.AxisRendererX.new(auditRoot, {\r\n//                         cellStartLocation: 0.1,\r\n//                         cellEndLocation: 0.9,\r\n//                         minGridDistance: 10\r\n//                     }),\r\n//                     tooltip: am5.Tooltip.new(auditRoot, {})\r\n//                 }));\r\n\r\n//                 auditXAxis.get(\"renderer\").labels.template.setAll({\r\n//                     forceHidden: true\r\n//                 });\r\n//                 auditXAxis.get(\"renderer\").grid.template.set(\"forceHidden\", true);\r\n//                 auditXAxis.data.setAll(auditData);\r\n\r\n//                 var auditYAxis = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n//                     renderer: am5xy.AxisRendererY.new(auditRoot, {})\r\n//                 }));\r\n\r\n//                 var auditYAxis2 = auditChart.yAxes.push(am5xy.ValueAxis.new(auditRoot, {\r\n//                     renderer: am5xy.AxisRendererY.new(auditRoot, { opposite: true }),\r\n//                     syncWithAxis: auditYAxis\r\n//                 }));\r\n\r\n//                 // Add series\r\n//                 function makeAuditSeries(name, fieldName, color, stacked, baseFieldName, isDuration, addToLegend, yAxis) {\r\n//                     var series = auditChart.series.push(am5xy.ColumnSeries.new(auditRoot, {\r\n//                         name: name,\r\n//                         xAxis: auditXAxis,\r\n//                         yAxis: yAxis,\r\n//                         stacked: stacked,\r\n//                         valueYField: fieldName,\r\n//                         openValueYField: baseFieldName,\r\n//                         categoryXField: \"reviewed_by\",\r\n//                         stroke: color,\r\n//                         fill: color\r\n//                     }));\r\n\r\n//                     series.columns.template.setAll({\r\n//                         tooltipText: \"{name}: {valueY}\",\r\n//                         width: am5.percent(50),\r\n//                         tooltipY: 0,\r\n//                         strokeWidth: 0\r\n//                     });\r\n\r\n//                     series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n//                         if (isDuration) {\r\n//                             const duration = target.dataItem.get(\"valueY\");\r\n//                             if (duration <= 30) {\r\n//                                 return am5.color(0xFF0000);\r\n//                             } else if (duration <= 60) {\r\n//                                 return am5.color(0xffb733);\r\n//                             } else if (duration <= 90) {\r\n//                                 return am5.color(0xFFD700);\r\n//                             } else {\r\n//                                 return am5.color(0x5bd75b);\r\n//                             }\r\n//                         }\r\n//                         return fill;\r\n//                     });\r\n\r\n//                     series.data.setAll(auditData);\r\n//                     series.appear();\r\n//                     if (addToLegend) {\r\n//                         legend.data.push(series);\r\n//                     }\r\n//                 }\r\n\r\n//                 // Individual series\r\n//                 makeAuditSeries(\"Annual Review\", \"annual_review_count\", am5.color(0x0096FF), false, null, false, true, auditYAxis2);\r\n//                 makeAuditSeries(\"Audit\", \"total_audits\", am5.color(0x87CEEB), false, null, false, true, auditYAxis2);\r\n\r\n//                 // Create stacked series for each date pair\r\n//                 makeAuditSeries(\"Audit Report\", \"audit_report_start\", am5.color(0x2c4e31), false, null, false, true, auditYAxis);\r\n//                 makeAuditSeries(\"Audit Report Duration\", \"audit_report_duration\", am5.color(0xFFD700), true, \"audit_report_start\", true, false, auditYAxis);\r\n\r\n//                 makeAuditSeries(\"Audit Certificate\", \"audit_certificate_start\", am5.color(0x3e6e45), false, null, false, true, auditYAxis);\r\n//                 makeAuditSeries(\"Audit Certificate Duration\", \"audit_certificate_duration\", am5.color(0x4A731C), true, \"audit_certificate_start\", true, false, auditYAxis);\r\n\r\n//                 makeAuditSeries(\"Audit Corrective Action\", \"audit_corrective_action_start\", am5.color(0x065449), false, null, false, true, auditYAxis);\r\n//                 makeAuditSeries(\"Audit Corrective Action Duration\", \"audit_corrective_action_duration\", am5.color(0x883407), true, \"audit_corrective_action_start\", true, false, auditYAxis);\r\n\r\n//                 makeAuditSeries(\"Reviewed\", \"reviewed_start\", am5.color(0x218678), false, null, false, true, auditYAxis);\r\n//                 makeAuditSeries(\"Reviewed Duration\", \"reviewed_duration\", am5.color(0x32CD32), true, \"reviewed_start\", true, false, auditYAxis);\r\n\r\n//                 // Make stuff animate on load\r\n//                 auditChart.appear(1000, 100);\r\n\r\n//                 // Add \"Reviewed by:\" label within the chart\r\n//                 auditChart.children.push(am5.Label.new(auditRoot, {\r\n//                     text: \"Reviewed by: \" + auditData[0].reviewed_by,\r\n//                     fontSize: 20,\r\n//                     centerX: am5.p50,\r\n//                     x: am5.p50,\r\n//                     marginTop: 20,\r\n//                     dy: 10\r\n//                 }));\r\n//             } catch (error) {\r\n//                 console.error('Error initializing audit chart:', error);\r\n//             }\r\n//         });\r\n//     }\r\n// }\r\n\r\n// // Event listener for when the modal is shown\r\n// $('#modalChart').on('shown.bs.modal', function (e) {\r\n//     var id = $(e.relatedTarget).data('id');\r\n//     fetch('AnalyticsIQ/fetch_supplier_data.php', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//             'Content-Type': 'application/x-www-form-urlencoded'\r\n//         },\r\n//         body: 'id=' + id\r\n//     })\r\n//     .then(response => {\r\n//         if (!response.ok) {\r\n//             throw new Error('Network response was not ok ' + response.statusText);\r\n//         }\r\n//         return response.json();\r\n//     })\r\n//     .then(data => {\r\n//         console.log(data);  // Log data for debugging\r\n//         displayChart(data);\r\n//     })\r\n//     .catch(error => {\r\n//         console.error('Error fetching or processing data:', error);\r\n//         alert('An error occurred while fetching the data. Please try again later.');\r\n//     });\r\n// });\r\n\r\n// // Helper function to parse date strings\r\n// function parseDate(dateString) {\r\n//     const [month, day, year] = dateString.split('/').map(Number);\r\n//     return new Date(year, month - 1, day);\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n// let currentRoot = null;\r\n// let complianceRoot = null;\r\n// let materialsRoot = null;\r\n\r\n// function displayChart(data) {\r\n//     // Dispose of the existing chart instances if they exist\r\n//     if (currentRoot) {\r\n//         currentRoot.dispose();\r\n//         currentRoot = null;\r\n//     }\r\n//     if (complianceRoot) {\r\n//         complianceRoot.dispose();\r\n//         complianceRoot = null;\r\n//     }\r\n//     if (materialsRoot) {\r\n//         materialsRoot.dispose();\r\n//         materialsRoot = null;\r\n//     }\r\n\r\n//     // Update the modal title with the vendor's name\r\n//     document.querySelector(\"#modalChart .modal-title\").innerText = \"Vendor's Name: \" + data.vendor_name;\r\n\r\n//     // Create root element for requirement chart\r\n//     currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n\r\n//     // Set themes\r\n//     currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n//     // Create chart\r\n//     var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n//         panX: false, // Disable panning\r\n//         panY: false, // Disable panning\r\n//         wheelX: \"none\", // Disable wheel zoom\r\n//         wheelY: \"none\", // Disable wheel zoom\r\n//         pinchZoomX: false // Disable pinch zoom\r\n//     }));\r\n\r\n//     // Add cursor\r\n//     var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n//         behavior: \"none\" // Disable cursor zoom\r\n//     }));\r\n//     cursor.lineY.set(\"visible\", false);\r\n\r\n//     // Create axes\r\n//     var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n//         categoryField: \"category\",\r\n//         renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n//     }));\r\n\r\n//     var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n//         renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n//     }));\r\n\r\n//     // Rotate x-axis labels\r\n//     xAxis.get(\"renderer\").labels.template.setAll({\r\n//         rotation: -30,\r\n//         centerY: am5.p50,\r\n//         centerX: am5.p100\r\n//     });\r\n\r\n//     // Create series\r\n//     var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n//         name: \"Requirements\",\r\n//         xAxis: xAxis,\r\n//         yAxis: yAxis,\r\n//         valueYField: \"value\",\r\n//         categoryXField: \"category\"\r\n//     }));\r\n\r\n//     // Set data\r\n//     const totalDocuments = data.document_count + data.document_other_count;\r\n//     const chartData = [\r\n//         { category: \"Requirements\", value: totalDocuments, color: am5.color(0x4da6ff) }, // blue\r\n//         { category: \"Non Expired\", value: data.non_expired, color: am5.color(0x32CD32) }, // green\r\n//         { category: \"Expired\", value: data.expired, color: am5.color(0xFF0000) }, // red\r\n//         { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(0xff3434) }, // light red\r\n//         { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(0xffb733) }, // orange\r\n//         { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(0xFFD700) } //  yellow\r\n//     ];\r\n//     series.data.setAll(chartData);\r\n//     xAxis.data.setAll(chartData);\r\n\r\n//     series.columns.template.setAll({\r\n//         tooltipText: \"{category}: {valueY}\",\r\n//         fill: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         stroke: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         width: am5.percent(120), // Applying the style\r\n//         fillOpacity: 0.8, // Setting fill opacity\r\n//         strokeOpacity: 0.8 // Setting stroke opacity\r\n//     });\r\n\r\n//     // Manually set colors for each column\r\n//     series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n//     series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     // Custom column shape (optional, if you want to keep the custom drawing from your initial script)\r\n//     series.columns.template.set(\"draw\", function(display, target) {\r\n//         var w = target.getPrivate(\"width\", 0);\r\n//         var h = target.getPrivate(\"height\", 0);\r\n//         display.moveTo(0, h);\r\n//         display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n//         display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n//     });\r\n\r\n//     // Make stuff animate on load\r\n//     series.appear(1000);\r\n//     chart.appear(1000, 100);\r\n\r\n//     // Create root element for compliance chart\r\n//     complianceRoot = am5.Root.new(\"complianceChartDiv\");\r\n//     complianceRoot.setThemes([am5themes_Animated.new(complianceRoot)]);\r\n//     var complianceChart = complianceRoot.container.children.push(am5percent.PieChart.new(complianceRoot, {}));\r\n//     var complianceSeries = complianceChart.series.push(am5percent.PieSeries.new(complianceRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(complianceRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)] // green for compliant, red for non-compliant\r\n//         })\r\n//     }));\r\n//     complianceSeries.data.setAll([\r\n//         { category: \"Compliance\", value: data.compliant_count },\r\n//         { category: \"Non-Compliance\", value: data.non_compliant_count }\r\n//     ]);\r\n//     complianceSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\",\r\n//     });\r\n\r\n//     // Create root element for materials chart\r\n//     materialsRoot = am5.Root.new(\"materialsChartDiv\");\r\n//     materialsRoot.setThemes([am5themes_Animated.new(materialsRoot)]);\r\n//     var materialsChart = materialsRoot.container.children.push(am5percent.PieChart.new(materialsRoot, {\r\n//         innerRadius: am5.percent(50)\r\n//     }));\r\n//     var materialsSeries = materialsChart.series.push(am5percent.PieSeries.new(materialsRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(materialsRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)] // green for active material, red for inactive material\r\n//         })\r\n//     }));\r\n//     materialsSeries.data.setAll([\r\n//         { category: \"Active Material\", value: data.active_material_count },\r\n//         { category: \"Inactive Material\", value: data.inactive_material_count }\r\n//     ]);\r\n//     materialsSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\"\r\n//     });\r\n//     materialsSeries.labels.template.set(\"text\", \"[bold]{category}[/]\\n{value}\");\r\n\r\n//     var totalLabel = materialsChart.seriesContainer.children.push(am5.Label.new(materialsRoot, {\r\n//         text: `Total materials\\n${data.material_count}`,\r\n//         fontSize: 20,\r\n//         centerX: am5.p50,\r\n//         centerY: am5.p50,\r\n//         populateText: true,\r\n//         textAlign: \"center\"\r\n//     }));\r\n// }\r\n\r\n// function fetchAndShowChart(id) {\r\n//     fetch('AnalyticsIQ/fetch_supplier_data.php', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//             'Content-Type': 'application/x-www-form-urlencoded'\r\n//         },\r\n//         body: 'id=' + id\r\n//     })\r\n//     .then(response => {\r\n//         if (!response.ok) {\r\n//             throw new Error('Network response was not ok ' + response.statusText);\r\n//         }\r\n//         return response.json();\r\n//     })\r\n//     .then(data => {\r\n//         console.log(data);  // Log data for debugging\r\n//         displayChart(data);\r\n//     })\r\n//     .catch(error => {\r\n//         console.error('Error fetching or processing data:', error);\r\n//         // Optionally show an error message to the user\r\n//         alert('An error occurred while fetching the data. Please try again later.');\r\n//     });\r\n// }\r\n\r\n// // Event listener for when the modal is shown\r\n// $('#modalChart').on('shown.bs.modal', function (e) {\r\n//     var id = $(e.relatedTarget).data('id');\r\n//     fetchAndShowChart(id);\r\n// });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// let currentRoot = null;\r\n// let complianceRoot = null;\r\n// let materialsRoot = null;\r\n\r\n// function displayChart(data) {\r\n//     // Dispose of the existing chart instances if they exist\r\n//     if (currentRoot) {\r\n//         currentRoot.dispose();\r\n//         currentRoot = null;\r\n//     }\r\n//     if (complianceRoot) {\r\n//         complianceRoot.dispose();\r\n//         complianceRoot = null;\r\n//     }\r\n//     if (materialsRoot) {\r\n//         materialsRoot.dispose();\r\n//         materialsRoot = null;\r\n//     }\r\n\r\n//     // Update the modal title with the vendor's name\r\n//     document.querySelector(\"#modalChart .modal-title\").innerText = \"Vendor's Name: \" + data.vendor_name;\r\n\r\n//     // Create root element for requirement chart\r\n//     currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n\r\n//     // Set themes\r\n//     currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n//     // Create chart\r\n//     var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n//         panX: false, // Disable panning\r\n//         panY: false, // Disable panning\r\n//         wheelX: \"none\", // Disable wheel zoom\r\n//         wheelY: \"none\", // Disable wheel zoom\r\n//         pinchZoomX: false // Disable pinch zoom\r\n//     }));\r\n\r\n//     // Add cursor\r\n//     var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n//         behavior: \"none\" // Disable cursor zoom\r\n//     }));\r\n//     cursor.lineY.set(\"visible\", false);\r\n\r\n//     // Create axes\r\n//     var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n//         categoryField: \"category\",\r\n//         renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n//     }));\r\n\r\n//     var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n//         renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n//     }));\r\n\r\n//     // Rotate x-axis labels\r\n//     xAxis.get(\"renderer\").labels.template.setAll({\r\n//         rotation: -30,\r\n//         centerY: am5.p50,\r\n//         centerX: am5.p100\r\n//     });\r\n\r\n//     // Create series\r\n//     var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n//         name: \"Requirements\",\r\n//         xAxis: xAxis,\r\n//         yAxis: yAxis,\r\n//         valueYField: \"value\",\r\n//         categoryXField: \"category\"\r\n//     }));\r\n\r\n//     // Set data\r\n//     const totalDocuments = data.document_count + data.document_other_count;\r\n//     const chartData = [\r\n//         { category: \"Requirements\", value: totalDocuments, color: am5.color(0x4da6ff) }, // blue\r\n//         { category: \"Non Expired\", value: data.non_expired, color: am5.color(0x32CD32) }, // green\r\n//         { category: \"Expired\", value: data.expired, color: am5.color(0xFF0000) }, // red\r\n//         { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(0xff3434) }, // light red\r\n//         { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(0xff8080) }, // light red\r\n//         { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(0xFFB6C1) } // light pink\r\n//     ];\r\n//     series.data.setAll(chartData);\r\n//     xAxis.data.setAll(chartData);\r\n\r\n//     series.columns.template.setAll({\r\n//         tooltipText: \"{category}: {valueY}\",\r\n//         fill: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         stroke: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         width: am5.percent(120), // Applying the style\r\n//         fillOpacity: 0.8, // Setting fill opacity\r\n//         strokeOpacity: 0.8 // Setting stroke opacity\r\n//     });\r\n\r\n//     // Manually set colors for each column\r\n//     series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n//     series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     // Custom column shape (optional, if you want to keep the custom drawing from your initial script)\r\n//     series.columns.template.set(\"draw\", function(display, target) {\r\n//         var w = target.getPrivate(\"width\", 0);\r\n//         var h = target.getPrivate(\"height\", 0);\r\n//         display.moveTo(0, h);\r\n//         display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n//         display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n//     });\r\n\r\n//     // Make stuff animate on load\r\n//     series.appear(1000);\r\n//     chart.appear(1000, 100);\r\n\r\n//     // Create root element for compliance chart\r\n//     complianceRoot = am5.Root.new(\"complianceChartDiv\");\r\n//     complianceRoot.setThemes([am5themes_Animated.new(complianceRoot)]);\r\n//     var complianceChart = complianceRoot.container.children.push(am5percent.PieChart.new(complianceRoot, {\r\n//         innerRadius: am5.percent(50)\r\n//     }));\r\n//     var complianceSeries = complianceChart.series.push(am5percent.PieSeries.new(complianceRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(complianceRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)] // green for compliant, red for non-compliant\r\n//         })\r\n//     }));\r\n//     complianceSeries.data.setAll([\r\n//         { category: \"Compliance\", value: data.compliant_count },\r\n//         { category: \"Non-Compliance\", value: data.non_compliant_count }\r\n//     ]);\r\n//     complianceSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\",\r\n//     });\r\n\r\n//     // Create root element for materials chart\r\n//     materialsRoot = am5.Root.new(\"materialsChartDiv\");\r\n//     materialsRoot.setThemes([am5themes_Animated.new(materialsRoot)]);\r\n//     var materialsChart = materialsRoot.container.children.push(am5percent.PieChart.new(materialsRoot, {\r\n//         innerRadius: am5.percent(50)\r\n//     }));\r\n//     var materialsSeries = materialsChart.series.push(am5percent.PieSeries.new(materialsRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         colors: am5.ColorSet.new(materialsRoot, {\r\n//             colors: [am5.color(0x32CD32), am5.color(0xFF0000)] // green for active material, red for inactive material\r\n//         })\r\n//     }));\r\n//     materialsSeries.data.setAll([\r\n//         { category: \"Active Material\", value: data.active_material_count },\r\n//         { category: \"Inactive Material\", value: data.inactive_material_count }\r\n//     ]);\r\n//     materialsSeries.slices.template.setAll({\r\n//         tooltipText: \"{category}: {value}\"\r\n//     });\r\n//     materialsSeries.labels.template.set(\"text\", \"[bold]{category}[/]\\n{value}\");\r\n\r\n//     // var totalMaterials = data.active_material_count + data.inactive_material_count;\r\n\r\n//     var totalLabel = materialsChart.seriesContainer.children.push(am5.Label.new(materialsRoot, {\r\n\r\n//         // text: \"Total Materials: \" + totalMaterials,\r\n\r\n//         text: `Total materials\\n${data.material_count}`,\r\n//         fontSize: 20,\r\n//         centerX: am5.p50,\r\n//         centerY: am5.p50,\r\n//         populateText: true,\r\n//         textAlign: \"center\"\r\n\r\n\r\n//     }));\r\n\r\n//   //   var centerLabel = donutSeries.children.push(am5.Label.new(donutRoot, {\r\n//   //     text: `Total materials\\n${data.material_count}`,\r\n//   //     fontSize: 20,\r\n//   //     centerX: am5.p50,\r\n//   //     centerY: am5.p50,\r\n//   //     textAlign: \"center\",\r\n//   //     fill: am5.color(0x000000)\r\n//   // }));    \r\n// }\r\n\r\n\r\n// function fetchAndShowChart(id) {\r\n//     fetch('AnalyticsIQ/fetch_supplier_data.php', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//             'Content-Type': 'application/x-www-form-urlencoded'\r\n//         },\r\n//         body: 'id=' + id\r\n//     })\r\n//     .then(response => {\r\n//         if (!response.ok) {\r\n//             throw new Error('Network response was not ok ' + response.statusText);\r\n//         }\r\n//         return response.json();\r\n//     })\r\n//     .then(data => {\r\n//         console.log(data);  // Log data for debugging\r\n//         displayChart(data);\r\n//     })\r\n//     .catch(error => {\r\n//         console.error('Error fetching or processing data:', error);\r\n//         // Optionally show an error message to the user\r\n//         alert('An error occurred while fetching the data. Please try again later.');\r\n//     });\r\n// }\r\n\r\n// // Event listener for when the modal is shown\r\n// $('#modalChart').on('shown.bs.modal', function (e) {\r\n//     var id = $(e.relatedTarget).data('id');\r\n//     fetchAndShowChart(id);\r\n// });\r\n\r\n\r\n\r\n\r\n\r\n\r\n//First Final\r\n\r\n// let currentRoot = null;\r\n// let pieRoot = null;\r\n// let donutRoot = null;\r\n\r\n// function disposeCharts() {\r\n//     if (currentRoot) {\r\n//         currentRoot.dispose();\r\n//         currentRoot = null;\r\n//     }\r\n//     if (pieRoot) {\r\n//         pieRoot.dispose();\r\n//         pieRoot = null;\r\n//     }\r\n//     if (donutRoot) {\r\n//         donutRoot.dispose();\r\n//         donutRoot = null;\r\n//     }\r\n// }\r\n\r\n// function displayChart(data) {\r\n//     // Dispose of any existing chart instances\r\n//     disposeCharts();\r\n\r\n//     // Update the modal title with the vendor's name\r\n//     document.querySelector(\"#modalChart .modal-title\").innerText = \"Vendor's Name: \" + data.vendor_name;\r\n\r\n//     // Create root element for the main chart\r\n//     currentRoot = am5.Root.new(\"requirementChartDiv\");\r\n\r\n//     // Set themes\r\n//     currentRoot.setThemes([am5themes_Animated.new(currentRoot)]);\r\n\r\n//     // Create chart\r\n//     var chart = currentRoot.container.children.push(am5xy.XYChart.new(currentRoot, {\r\n//         panX: false,\r\n//         panY: false,\r\n//         wheelX: \"none\",\r\n//         wheelY: \"none\",\r\n//         pinchZoomX: false\r\n//     }));\r\n\r\n//     // Add cursor\r\n//     var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(currentRoot, {\r\n//         behavior: \"none\"\r\n//     }));\r\n//     cursor.lineY.set(\"visible\", false);\r\n\r\n//     // Create axes\r\n//     var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(currentRoot, {\r\n//         categoryField: \"category\",\r\n//         renderer: am5xy.AxisRendererX.new(currentRoot, { minGridDistance: 30 })\r\n//     }));\r\n\r\n//     var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(currentRoot, {\r\n//         renderer: am5xy.AxisRendererY.new(currentRoot, {})\r\n//     }));\r\n\r\n//     // Rotate x-axis labels\r\n//     xAxis.get(\"renderer\").labels.template.setAll({\r\n//         rotation: -30,\r\n//         centerY: am5.p50,\r\n//         centerX: am5.p100\r\n//     });\r\n\r\n//     // Create series\r\n//     var series = chart.series.push(am5xy.ColumnSeries.new(currentRoot, {\r\n//         name: \"Requirements\",\r\n//         xAxis: xAxis,\r\n//         yAxis: yAxis,\r\n//         valueYField: \"value\",\r\n//         categoryXField: \"category\"\r\n//     }));\r\n\r\n//     // Set data\r\n//     const totalDocuments = data.document_count + data.document_other_count;\r\n//     const chartData = [\r\n//         { category: \"Requirements\", value: totalDocuments, color: am5.color(totalDocuments === 0 ? 0xC0C0C0 : 0x4da6ff) }, // Grey for 0 value\r\n//         { category: \"Non Expired\", value: data.non_expired, color: am5.color(data.non_expired === 0 ? 0xC0C0C0 : 0x32CD32) }, // Grey for 0 value\r\n//         { category: \"Expired\", value: data.expired, color: am5.color(data.expired === 0 ? 0xC0C0C0 : 0xFF0000) }, // Grey for 0 value\r\n//         { category: \"Nearly Expired 30 days\", value: data.nearly_expired_30, color: am5.color(data.nearly_expired_30 === 0 ? 0xC0C0C0 : 0xff3434) }, // Grey for 0 value\r\n//         { category: \"Nearly Expired 60 days\", value: data.nearly_expired_60, color: am5.color(data.nearly_expired_60 === 0 ? 0xC0C0C0 : 0xff8080) }, // Grey for 0 value\r\n//         { category: \"Nearly Expired 90 days\", value: data.nearly_expired_90, color: am5.color(data.nearly_expired_90 === 0 ? 0xC0C0C0 : 0xFFB6C1) }  // Grey for 0 value\r\n//     ];\r\n//     series.data.setAll(chartData);\r\n//     xAxis.data.setAll(chartData);\r\n\r\n//     series.columns.template.setAll({\r\n//         tooltipText: \"{category}: {valueY}\",\r\n//         fill: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         stroke: function(target) {\r\n//             return target.dataItem.dataContext.color;\r\n//         },\r\n//         width: am5.percent(120),\r\n//         fillOpacity: 0.8,\r\n//         strokeOpacity: 0.8\r\n//     });\r\n\r\n//     series.columns.template.adapters.add(\"fill\", (fill, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n//     series.columns.template.adapters.add(\"stroke\", (stroke, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     series.columns.template.set(\"draw\", function(display, target) {\r\n//         var w = target.getPrivate(\"width\", 0);\r\n//         var h = target.getPrivate(\"height\", 0);\r\n//         display.moveTo(0, h);\r\n//         display.bezierCurveTo(w / 4, h, w / 4, 0, w / 2, 0);\r\n//         display.bezierCurveTo(w - w / 4, 0, w - w / 4, h, w, h);\r\n//     });\r\n\r\n//     series.appear(1000);\r\n//     chart.appear(1000, 100);\r\n\r\n//     // Create pie chart for compliant and non-compliant counts\r\n//     pieRoot = am5.Root.new(\"complianceChartDiv\");\r\n//     pieRoot.setThemes([am5themes_Animated.new(pieRoot)]);\r\n\r\n//     var pieChart = pieRoot.container.children.push(am5percent.PieChart.new(pieRoot, {\r\n//         layout: pieRoot.horizontalLayout\r\n//     }));\r\n\r\n//     var pieSeries = pieChart.series.push(am5percent.PieSeries.new(pieRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         alignLabels: false\r\n//     }));\r\n\r\n//     const pieData = [\r\n//         { category: \"Compliance\", value: data.compliant_count, color: am5.color(data.compliant_count === 0 ? 0xC0C0C0 : 0x32CD32) }, // Grey for 0 value\r\n//         { category: \"Non-Compliance\", value: data.non_compliant_count, color: am5.color(data.non_compliant_count === 0 ? 0xC0C0C0 : 0xFF0000) } // Grey for 0 value\r\n//     ];\r\n\r\n//     if (data.compliant_count === 0 && data.non_compliant_count === 0) {\r\n//         pieData.push({ category: \"No Data\", value: 1, color: am5.color(0xC0C0C0) });\r\n//     }\r\n\r\n//     pieSeries.data.setAll(pieData);\r\n\r\n//     pieSeries.slices.template.adapters.add(\"fill\", (fill, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     pieSeries.slices.template.adapters.add(\"stroke\", (stroke, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     // Create donut chart for material counts\r\n//     donutRoot = am5.Root.new(\"materialsChartDiv\");\r\n//     donutRoot.setThemes([am5themes_Animated.new(donutRoot)]);\r\n\r\n//     var donutChart = donutRoot.container.children.push(am5percent.PieChart.new(donutRoot, {\r\n//         layout: donutRoot.horizontalLayout,\r\n//         innerRadius: am5.percent(50)\r\n//     }));\r\n\r\n//     var donutSeries = donutChart.series.push(am5percent.PieSeries.new(donutRoot, {\r\n//         valueField: \"value\",\r\n//         categoryField: \"category\",\r\n//         alignLabels: false\r\n//     }));\r\n\r\n//     const donutData = [\r\n//         { category: \"Active Materials\", value: data.active_material_count, color: am5.color(data.active_material_count === 0 ? 0xC0C0C0 : 0x32CD32) }, // Grey for 0 value\r\n//         { category: \"Inactive Materials\", value: data.inactive_material_count, color: am5.color(data.inactive_material_count === 0 ? 0xC0C0C0 : 0xFF0000) } // Grey for 0 value\r\n//     ];\r\n\r\n//     if (data.active_material_count === 0 && data.inactive_material_count === 0) {\r\n//         donutData.push({ category: \"No Data available\", value: 1, color: am5.color(0xC0C0C0) });\r\n//     }\r\n\r\n//     donutSeries.data.setAll(donutData);\r\n\r\n//     donutSeries.slices.template.adapters.add(\"fill\", (fill, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     donutSeries.slices.template.adapters.add(\"stroke\", (stroke, target) => {\r\n//         return target.dataItem.dataContext.color;\r\n//     });\r\n\r\n//     var centerLabel = donutSeries.children.push(am5.Label.new(donutRoot, {\r\n//         text: `Total materials\\n${data.material_count}`,\r\n//         fontSize: 20,\r\n//         centerX: am5.p50,\r\n//         centerY: am5.p50,\r\n//         textAlign: \"center\",\r\n//         fill: am5.color(0x000000)\r\n//     }));\r\n// }\r\n\r\n// function fetchAndShowChart(id) {\r\n//     fetch('AnalyticsIQ/fetch_supplier_data.php', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//             'Content-Type': 'application/x-www-form-urlencoded'\r\n//         },\r\n//         body: 'id=' + id\r\n//     })\r\n//     .then(response => {\r\n//         if (!response.ok) {\r\n//             throw new Error('Network response was not ok ' + response.statusText);\r\n//         }\r\n//         return response.json();\r\n//     })\r\n//     .then(data => {\r\n//         console.log(data);  // Log data for debugging\r\n//         displayChart(data);\r\n//     })\r\n//     .catch(error => {\r\n//         console.error('Error fetching or processing data:', error);\r\n//         alert('An error occurred while fetching the data. Please try again later.');\r\n//     });\r\n// }\r\n\r\n// $('#modalChart').on('shown.bs.modal', function (e) {\r\n//     var id = $(e.relatedTarget).data('id');\r\n//     fetchAndShowChart(id);\r\n// });\r\n\r\n\r\n\r\n\r\n\r\n//Send Tab\r\n\r\nam5.ready(function() {\r\n  // First Waterfall Chart\r\n  var root1 = am5.Root.new(\"waterfallChart1\");\r\n\r\n  root1.setThemes([\r\n    am5themes_Animated.new(root1)\r\n  ]);\r\n\r\n  var chart1 = root1.container.children.push(am5xy.XYChart.new(root1, {\r\n    panX: false,\r\n    panY: false,\r\n    paddingLeft: 0\r\n  }));\r\n\r\n  var xRenderer1 = am5xy.AxisRendererX.new(root1, {\r\n    minGridDistance: 30,\r\n    minorGridEnabled: true\r\n  });\r\n\r\n  var xAxis1 = chart1.xAxes.push(am5xy.CategoryAxis.new(root1, {\r\n    maxDeviation: 0,\r\n    categoryField: \"category\",\r\n    renderer: xRenderer1,\r\n    tooltip: am5.Tooltip.new(root1, {})\r\n  }));\r\n\r\n  xRenderer1.grid.template.setAll({\r\n    location: 1\r\n  });\r\n\r\n  var yAxis1 = chart1.yAxes.push(am5xy.ValueAxis.new(root1, {\r\n    maxDeviation: 0,\r\n    min: 0,\r\n    renderer: am5xy.AxisRendererY.new(root1, { strokeOpacity: 0.1 }),\r\n    tooltip: am5.Tooltip.new(root1, {})\r\n  }));\r\n\r\n  var cursor1 = chart1.set(\"cursor\", am5xy.XYCursor.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1\r\n  }));\r\n\r\n  var series1 = chart1.series.push(am5xy.ColumnSeries.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1,\r\n    valueYField: \"value\",\r\n    openValueYField: \"open\",\r\n    categoryXField: \"category\"\r\n  }));\r\n\r\n  series1.columns.template.setAll({\r\n    templateField: \"columnConfig\",\r\n    strokeOpacity: 0\r\n  });\r\n\r\n  series1.bullets.push(function() {\r\n    return am5.Bullet.new(root1, {\r\n      sprite: am5.Label.new(root1, {\r\n        text: \"{displayValue}\",\r\n        centerY: am5.p50,\r\n        centerX: am5.p50,\r\n        populateText: true\r\n      })\r\n    });\r\n  });\r\n\r\n  var stepSeries1 = chart1.series.push(am5xy.StepLineSeries.new(root1, {\r\n    xAxis: xAxis1,\r\n    yAxis: yAxis1,\r\n    valueYField: \"stepValue\",\r\n    categoryXField: \"category\",\r\n    noRisers: true,\r\n    locationX: 0.65,\r\n    stroke: root1.interfaceColors.get(\"alternativeBackground\")\r\n  }));\r\n\r\n  stepSeries1.strokes.template.setAll({\r\n    strokeDasharray: [3, 3]\r\n  });\r\n\r\n  var colorSet1 = am5.ColorSet.new(root1, {});\r\n\r\n  fetch('AnalyticsIQ/supplier_send_data.php')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      var data1 = [\r\n        { category: \"Total Send\", value: parseInt(data.donutData.total_send), open: 0, stepValue: parseInt(data.donutData.total_send), columnConfig: { fill: am5.color(0x4da6ff) }, displayValue: parseInt(data.donutData.total_send) },\r\n        { category: \"Pending\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), open: parseInt(data.donutData.total_send), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), columnConfig: { fill: am5.color(0xf4b943) }, displayValue: parseInt(data.donutData.pending) },\r\n        { category: \"Approved\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), columnConfig: { fill: am5.color(0x32CD32) }, displayValue: parseInt(data.donutData.approved) },\r\n        { category: \"Non Approved\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), columnConfig: { fill: am5.color(0xff0000) }, displayValue: parseInt(data.donutData.non_approved) },\r\n        { category: \"Emergency Use Only\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), open: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved), stepValue: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), columnConfig: { fill: am5.color(0xff8080) }, displayValue: parseInt(data.donutData.emergency_use_only) },\r\n        { category: \"Do Not Use\", value: parseInt(data.donutData.total_send) - parseInt(data.donutData.pending) - parseInt(data.donutData.approved) - parseInt(data.donutData.non_approved) + parseInt(data.donutData.emergency_use_only), open: 0, columnConfig: { fill: am5.color(0xffff00) }, displayValue: parseInt(data.donutData.do_not_use) }\r\n      ];\r\n\r\n      xAxis1.data.setAll(data1);\r\n      series1.data.setAll(data1);\r\n      stepSeries1.data.setAll(data1);\r\n    })\r\n    .catch(error => console.error('Error fetching data:', error));\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n//FOR TOTAL RECEIVED Tab\r\n\r\nam5.ready(function() {\r\n  var root = am5.Root.new(\"receivedchartdiv\");\r\n\r\n  root.setThemes([ am5themes_Animated.new(root) ]);\r\n\r\n  var chart = root.container.children.push(\r\n      am5xy.XYChart.new(root, {\r\n          panX: false, // Disable horizontal panning\r\n          panY: false, // Disable vertical panning\r\n          wheelX: \"none\", // Disable wheel zooming on X axis\r\n          wheelY: \"none\", // Disable wheel zooming on Y axis\r\n          pinchZoomY: false // Disable pinch zoom on Y axis\r\n      })\r\n  );\r\n\r\n  var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(root, {}));\r\n  cursor.lineX.set(\"visible\", false); // Hide vertical cursor line\r\n\r\n  var yRenderer = am5xy.AxisRendererY.new(root, { minGridDistance: 30 });\r\n  var yAxis = chart.yAxes.push(\r\n      am5xy.CategoryAxis.new(root, {\r\n          maxDeviation: 0.3,\r\n          categoryField: \"name\",\r\n          renderer: yRenderer\r\n      })\r\n  );\r\n\r\n  var xAxis = chart.xAxes.push(\r\n      am5xy.ValueAxis.new(root, {\r\n          renderer: am5xy.AxisRendererX.new(root, {})\r\n      })\r\n  );\r\n\r\n  // Fetch data from PHP script using fetch API\r\n  fetch('AnalyticsIQ/supplier_received_data.php')\r\n      .then(function(response) {\r\n          return response.json();\r\n      })\r\n      .then(function(data) {\r\n          // console.log('Data received:', data); // Log the received data\r\n\r\n          if (data.length === 0) {\r\n              console.error('No data received');\r\n              return;\r\n          }\r\n\r\n          // Aggregate data counts\r\n          var aggregatedData = [\r\n              { name: \"Compliance\", value: data.reduce((sum, item) => sum + parseFloat(item.compliance_percentage), 0), color: am5.color(0x00FF00) }, // Green\r\n              { name: \"Non Compliance\", value: data.reduce((sum, item) => sum + parseInt(item.d_non_compliance), 0), color: am5.color(0xFF0000) }, // Red\r\n              { name: \"Pending\", value: data.reduce((sum, item) => sum + parseInt(item.pending_count), 0), color: am5.color(0xFFA500) }, // Orange\r\n              { name: \"Approved\", value: data.reduce((sum, item) => sum + parseInt(item.approved_count), 0), color: am5.color(0x32CD32) }, // Lime Green\r\n              { name: \"Non Approved\", value: data.reduce((sum, item) => sum + parseInt(item.non_approved_count), 0), color: am5.color(0xFF6347) }, // Light Red\r\n              { name: \"Emergency Use Only\", value: data.reduce((sum, item) => sum + parseInt(item.emergency_use_only_count), 0), color: am5.color(0xFFC0CB) }, // Pink\r\n              { name: \"Do Not Use\", value: data.reduce((sum, item) => sum + parseInt(item.do_not_use_count), 0), color: am5.color(0xFFFF00) }, // Yellow\r\n              { name: \"Total Received\", value: data.reduce((sum, item) => sum + parseInt(item.received_count), 0), color: am5.color(0x4da6ff) } // Blue\r\n          ];\r\n\r\n          var series = chart.series.push(\r\n              am5xy.ColumnSeries.new(root, {\r\n                  xAxis: xAxis,\r\n                  yAxis: yAxis,\r\n                  valueXField: \"value\", // Change to valueXField for horizontal bar chart\r\n                  categoryYField: \"name\", // Change to categoryYField for horizontal bar chart\r\n                  tooltip: am5.Tooltip.new(root, {\r\n                      labelText: \"{name}: {valueX}\" // Change to valueX for horizontal bar chart\r\n                  })\r\n              })\r\n          );\r\n\r\n          series.columns.template.setAll({ cornerRadiusTL: 5, cornerRadiusBL: 5 }); // Adjust corner radius for horizontal bars\r\n          series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n              return target.dataItem.dataContext.color;\r\n          });\r\n\r\n          series.columns.template.adapters.add(\"stroke\", function(stroke, target) {\r\n              return target.dataItem.dataContext.color;\r\n          });\r\n\r\n          series.data.setAll(aggregatedData);\r\n          yAxis.data.setAll(aggregatedData); // Set data for yAxis instead of xAxis for horizontal bar chart\r\n\r\n      })\r\n      .catch(function(error) {\r\n          console.error('Error fetching data:', error);\r\n      });\r\n});\r\n\r\n\r\n\r\n//Frequency \r\n\r\nam5.ready(function() {\r\n  // Second Donut Chart\r\n  var root2 = am5.Root.new(\"donutChart2\");\r\n  root2.setThemes([\r\n    am5themes_Animated.new(root2)\r\n  ]);\r\n\r\n  var chart2 = root2.container.children.push(\r\n    am5percent.PieChart.new(root2, {\r\n      layout: root2.verticalLayout,\r\n      innerRadius: am5.percent(50)\r\n    })\r\n  );\r\n\r\n  var series2 = chart2.series.push(\r\n    am5percent.PieSeries.new(root2, {\r\n      valueField: \"value\",\r\n      categoryField: \"category\"\r\n    })\r\n  );\r\n\r\n  fetch('AnalyticsIQ/supplier_send_data.php')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      series2.data.setAll([\r\n        { category: \"Once Per Day\", value: parseInt(data.lineData.once_per_day), color: am5.color(0xc0ff80) },\r\n        { category: \"Once Per Week\", value: parseInt(data.lineData.once_per_week), color: am5.color(0x90EE90) },\r\n        { category: \"1st and 15th\", value: parseInt(data.lineData.first_and_fifteenth) },\r\n        { category: \"Once Per Month\", value: parseInt(data.lineData.once_per_month) },\r\n        { category: \"Once Per Year\", value: parseInt(data.lineData.once_per_year) }\r\n      ]);\r\n\r\n      series2.labels.template.set(\"text\", \"{category}: {value}\");\r\n    })\r\n    .catch(error => console.error('Error fetching data:', error));\r\n});\r\n\r\n\r\n\r\n\r\n\r\n//Materials and Requiremnets Tab\r\n\r\n  am5.ready(function() {\r\n    function createChart(rootElementId, chartData, maxVal) {\r\n      var root = am5.Root.new(rootElementId);\r\n  \r\n      root.setThemes([\r\n        am5themes_Animated.new(root)\r\n      ]);\r\n  \r\n      var chart = root.container.children.push(am5radar.RadarChart.new(root, {\r\n        panX: false,\r\n        panY: false,\r\n        wheelX: \"panX\",\r\n        wheelY: \"zoomX\",\r\n        innerRadius: am5.percent(20),\r\n        startAngle: -90,\r\n        endAngle: 180\r\n      }));\r\n  \r\n      var cursor = chart.set(\"cursor\", am5radar.RadarCursor.new(root, {\r\n        behavior: \"zoomX\"\r\n      }));\r\n  \r\n      cursor.lineY.set(\"visible\", false);\r\n  \r\n      var xRenderer = am5radar.AxisRendererCircular.new(root, {});\r\n      xRenderer.labels.template.setAll({\r\n        radius: 10\r\n      });\r\n      xRenderer.grid.template.setAll({\r\n        forceHidden: true\r\n      });\r\n      var xAxis = chart.xAxes.push(am5xy.ValueAxis.new(root, {\r\n        renderer: xRenderer,\r\n        min: 0,\r\n        max: maxVal,\r\n        strictMinMax: true,\r\n        numberFormat: \"#'%'\",\r\n        tooltip: am5.Tooltip.new(root, {})\r\n      }));\r\n  \r\n      var yRenderer = am5radar.AxisRendererRadial.new(root, {\r\n        minGridDistance: 20\r\n      });\r\n      yRenderer.labels.template.setAll({\r\n        centerX: am5.p100,\r\n        fontWeight: \"500\",\r\n        fontSize: 18,\r\n        templateField: \"columnSettings\"\r\n      });\r\n      yRenderer.grid.template.setAll({\r\n        forceHidden: true\r\n      });\r\n      var yAxis = chart.yAxes.push(am5xy.CategoryAxis.new(root, {\r\n        categoryField: \"category\",\r\n        renderer: yRenderer\r\n      }));\r\n      yAxis.data.setAll(chartData);\r\n  \r\n      var series1 = chart.series.push(am5radar.RadarColumnSeries.new(root, {\r\n        xAxis: xAxis,\r\n        yAxis: yAxis,\r\n        clustered: false,\r\n        valueXField: \"full\",\r\n        categoryYField: \"category\",\r\n        fill: root.interfaceColors.get(\"alternativeBackground\")\r\n      }));\r\n      series1.columns.template.setAll({\r\n        width: am5.p100,\r\n        fillOpacity: 0.08,\r\n        strokeOpacity: 0,\r\n        cornerRadius: 20\r\n      });\r\n      series1.data.setAll(chartData);\r\n  \r\n      var series2 = chart.series.push(am5radar.RadarColumnSeries.new(root, {\r\n        xAxis: xAxis,\r\n        yAxis: yAxis,\r\n        clustered: false,\r\n        valueXField: \"value\",\r\n        categoryYField: \"category\"\r\n      }));\r\n      series2.columns.template.setAll({\r\n        width: am5.p100,\r\n        strokeOpacity: 0,\r\n        tooltipText: \"{category}: {valueX}%\",\r\n        cornerRadius: 20,\r\n        templateField: \"columnSettings\"\r\n      });\r\n      series2.data.setAll(chartData);\r\n  \r\n      series1.appear(1000);\r\n      series2.appear(1000);\r\n      chart.appear(1000, 100);\r\n    }\r\n  \r\n    fetch('AnalyticsIQ/supplier_materials_data.php')\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        var totalRequirements = data.total_requirements;\r\n        var complianceValue = data.compliance_count;\r\n        var nonComplianceValue = data.non_compliance_count;\r\n        var requirementData = [{\r\n          category: totalRequirements + \" Total Requirements\",\r\n          value: totalRequirements,\r\n          full: totalRequirements,\r\n          columnSettings: {\r\n            fill: am5.color(0x4da6ff)\r\n          }\r\n        }, {\r\n          category: complianceValue + \" Compliance\",\r\n          value: totalRequirements === 0 ? 100 : (complianceValue / totalRequirements) * 100,\r\n          full: 100,\r\n          columnSettings: {\r\n            fill: am5.color(0x32CD32)\r\n          }\r\n        }, {\r\n          category: nonComplianceValue + \" Non-Compliance\",\r\n          value: totalRequirements === 0 ? 100 : (nonComplianceValue / totalRequirements) * 100,\r\n          full: 100,\r\n          columnSettings: {\r\n            fill: am5.color(0xff0000)\r\n          }\r\n        }];\r\n  \r\n        var totalMaterials = data.total_materials;\r\n        var activeMaterialsValue = data.total_active_materials;\r\n        var inactiveMaterialsValue = data.total_inactive_materials;\r\n        var materialData = [{\r\n          category: totalMaterials + \" Total Materials\",\r\n          value: totalMaterials,\r\n          full: totalMaterials,\r\n          columnSettings: {\r\n            fill: am5.color(0x4da6ff)\r\n          }\r\n        }, {\r\n          category: activeMaterialsValue + \" Active Materials\",\r\n          value: totalMaterials === 0 ? 100 : (activeMaterialsValue / totalMaterials) * 100,\r\n          full: 100,\r\n          columnSettings: {\r\n            fill: am5.color(0x32CD32)\r\n          }\r\n        }, {\r\n          category: inactiveMaterialsValue + \" Inactive Materials\",\r\n          value: totalMaterials === 0 ? 100 : (inactiveMaterialsValue / totalMaterials) * 100,\r\n          full: 100,\r\n          columnSettings: {\r\n            fill: am5.color(0xff0000)\r\n          }\r\n        }];\r\n  \r\n        createChart(\"requirementchartdiv\", requirementData, 100);\r\n        createChart(\"materialchartdiv\", materialData, 100);\r\n      })\r\n      .catch(error => console.error('Error fetching data:', error));\r\n  }); // end am5.ready()\r\n  \r\n\r\n\r\n        \r\n    // am5.ready(function() {\r\n    //     var root = am5.Root.new(\"chartdiv\");\r\n\r\n    //     root.setThemes([ am5themes_Animated.new(root) ]);\r\n\r\n    //     var chart = root.container.children.push(\r\n    //         am5xy.XYChart.new(root, {\r\n    //             panX: true,\r\n    //             panY: true,\r\n    //             wheelX: \"panX\",\r\n    //             wheelY: \"zoomX\",\r\n    //             pinchZoomX: true\r\n    //         })\r\n    //     );\r\n\r\n    //     var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(root, {}));\r\n    //     cursor.lineY.set(\"visible\", false);\r\n\r\n    //     var xRenderer = am5xy.AxisRendererX.new(root, { minGridDistance: 30 });\r\n    //     var xAxis = chart.xAxes.push(\r\n    //         am5xy.CategoryAxis.new(root, {\r\n    //             maxDeviation: 0.3,\r\n    //             categoryField: \"name\",\r\n    //             renderer: xRenderer\r\n    //         })\r\n    //     );\r\n\r\n    //     var yAxis = chart.yAxes.push(\r\n    //         am5xy.ValueAxis.new(root, {\r\n    //             renderer: am5xy.AxisRendererY.new(root, {})\r\n    //         })\r\n    //     );\r\n\r\n    //     // Fetch data from PHP script using fetch API\r\n    //     fetch('AnalyticsIQ/received_data.php')\r\n    //         .then(function(response) {\r\n    //             return response.json();\r\n    //         })\r\n    //         .then(function(data) {\r\n    //             // console.log('Data received:', data); // Log the received data\r\n\r\n    //             if (data.length === 0) {\r\n    //                 console.error('No data received');\r\n    //                 return;\r\n    //             }\r\n\r\n    //             // Aggregate data counts\r\n    //             var aggregatedData = [\r\n    //                 { name: \"Compliance\", value: data.reduce((sum, item) => sum + parseFloat(item.compliance_percentage), 0), color: am5.color(0x00FF00) }, // Green\r\n    //                 { name: \"Non Compliance\", value: data.reduce((sum, item) => sum + parseInt(item.d_non_compliance), 0), color: am5.color(0xFF0000) }, // Red\r\n    //                 { name: \"Pending\", value: data.reduce((sum, item) => sum + parseInt(item.pending_count), 0), color: am5.color(0xFFA500) }, // Orange\r\n    //                 { name: \"Approved\", value: data.reduce((sum, item) => sum + parseInt(item.approved_count), 0), color: am5.color(0x32CD32) }, // Lime Green\r\n    //                 { name: \"Non Approved\", value: data.reduce((sum, item) => sum + parseInt(item.non_approved_count), 0), color: am5.color(0xFF6347) }, // Light Red\r\n    //                 { name: \"Emergency Use Only\", value: data.reduce((sum, item) => sum + parseInt(item.emergency_use_only_count), 0), color: am5.color(0xFFC0CB) }, // Pink\r\n    //                 { name: \"Do Not Use\", value: data.reduce((sum, item) => sum + parseInt(item.do_not_use_count), 0), color: am5.color(0xFFFF00) }, // Yellow\r\n    //                 { name: \"Received Count\", value: data.reduce((sum, item) => sum + parseInt(item.received_count), 0), color: am5.color(0x0000FF) } // Blue\r\n    //             ];\r\n\r\n    //             var series = chart.series.push(\r\n    //                 am5xy.ColumnSeries.new(root, {\r\n    //                     xAxis: xAxis,\r\n    //                     yAxis: yAxis,\r\n    //                     valueYField: \"value\",\r\n    //                     categoryXField: \"name\",\r\n    //                     tooltip: am5.Tooltip.new(root, {\r\n    //                         labelText: \"{name}: {valueY}\"\r\n    //                     })\r\n    //                 })\r\n    //             );\r\n\r\n    //             series.columns.template.setAll({ cornerRadiusTL: 5, cornerRadiusTR: 5 });\r\n    //             series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n    //                 return target.dataItem.dataContext.color;\r\n    //             });\r\n\r\n    //             series.columns.template.adapters.add(\"stroke\", function(stroke, target) {\r\n    //                 return target.dataItem.dataContext.color;\r\n    //             });\r\n\r\n    //             series.data.setAll(aggregatedData);\r\n    //             xAxis.data.setAll(aggregatedData);\r\n\r\n    //             var legendRoot = am5.Root.new(\"legenddiv\");\r\n    //             legendRoot.setThemes([ am5themes_Animated.new(legendRoot) ]);\r\n\r\n    //             var legend = legendRoot.container.children.push(\r\n    //                 am5.Legend.new(legendRoot, {\r\n    //                     centerX: am5.percent(50),\r\n    //                     x: am5.percent(50),\r\n    //                     marginTop: 15\r\n    //                 })\r\n    //             );\r\n\r\n    //             // Create legend items manually\r\n    //             var legendData = aggregatedData.map(function(item) {\r\n    //                 return {\r\n    //                     name: item.name,\r\n    //                     fill: item.color\r\n    //                 };\r\n    //             });\r\n\r\n    //             legend.data.setAll(legendData);\r\n    //         })\r\n    //         .catch(function(error) {\r\n    //             console.error('Error fetching data:', error);\r\n    //         });\r\n    // });\r\n"]}