"use strict";document.addEventListener("DOMContentLoaded",function(){fetch("ChartIQ/compliance_data.php").then(function(e){return e.json()}).then(function(s){if(!(s&&s.folderData&&s.folderData.length&&s.fileData))return console.error("Invalid data format:",s),void alert("Received invalid data. Please check the server response.");am5.ready(function(){var e=am5.Root.new("comchartdiv");e._logo.dispose(),e.setThemes([am5themes_Animated.new(e)]);var r=e.container.children.push(am5xy.XYChart.new(e,{panX:!1,panY:!1,wheelX:"none",wheelY:"none",pinchZoomX:!1,paddingTop:50,layout:e.verticalLayout}));r.set("colors",am5.ColorSet.new(e,{colors:[am5.color(16776960),am5.color(16753920),am5.color(2263842),am5.color(16711680),am5.color(15616811),am5.color(16735324),am5.color(16747146)]}));var a=am5xy.AxisRendererX.new(e,{minGridDistance:50,minorGridEnabled:!0});a.grid.template.setAll({location:1,strokeDasharray:[5,5]});var t=am5xy.AxisRendererY.new(e,{strokeOpacity:.1});t.grid.template.setAll({strokeDasharray:[5,5]}),a.labels.template.setAll({forceHidden:!0});var o=r.xAxes.push(am5xy.CategoryAxis.new(e,{categoryField:"category",renderer:a,tooltip:am5.Tooltip.new(e,{})})),l=r.yAxes.push(am5xy.ValueAxis.new(e,{min:0,renderer:t})),n=r.series.push(am5xy.ColumnSeries.new(e,{name:"Series 1",xAxis:o,yAxis:l,valueYField:"value",categoryXField:"category",tooltip:am5.Tooltip.new(e,{labelText:"{category}: {valueY}"})}));n.columns.template.setAll({tooltipY:0,tooltipText:"{category}: {valueY}",shadowOpacity:.1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,strokeWidth:2,stroke:am5.color(16777215),shadowColor:am5.color(0),cornerRadiusTL:50,cornerRadiusTR:50,fill:void 0,fillOpacity:1}),n.columns.template.states.create("hover",{shadowOpacity:1,shadowBlur:10,cornerRadiusTL:10,cornerRadiusTR:10}),n.columns.template.adapters.add("fill",function(e,a){return r.get("colors").getIndex(n.columns.indexOf(a))});var i=[{category:"Folders",value:Number(s.folderData[0].main_folder_count)},{category:"Documents",value:Number(s.fileData.latest_files_count)},{category:"Non Expired",value:Number(s.fileData.non_expired)},{category:"Expired",value:Number(s.fileData.expired)},{category:"Nearly Expired 30 Days",value:Number(s.fileData.nearly_expired_30_days)},{category:"Nearly Expired 60 Days",value:Number(s.fileData.nearly_expired_60_days)},{category:"Nearly Expired 90 Days",value:Number(s.fileData.nearly_expired_90_days)}];o.data.setAll(i),n.data.setAll(i);var c=r.children.unshift(am5.Legend.new(e,{centerX:am5.p50,x:am5.p50,y:am5.percent(-4),layout:e.gridLayout}));function d(){window.innerWidth<600?(c.set("layout",e.verticalLayout),c.set("y",am5.percent(0))):window.innerWidth<1024?(c.set("layout",e.horizontalLayout),c.set("y",am5.percent(2))):(c.set("layout",e.gridLayout),c.set("y",am5.percent(-4)))}c.data.setAll(n.dataItems),c.labels.template.setAll({text:"{category}: {valueY}",maxWidth:120,wrap:!0,fill:am5.color(0)}),c.set("width",am5.percent(100)),c.set("fixedWidthGrid",!0),n.appear(1e3),r.appear(1e3,100),window.addEventListener("resize",function(){d(),r.appear(0,0)}),d()})}).catch(function(e){console.error("Error fetching data:",e),alert("Failed to fetch compliance data. Please try again later.")})}),document.addEventListener("DOMContentLoaded",function(){fetch("ChartIQ/compliance_data.php").then(function(e){return e.json()}).then(function(s){if(!(s&&s.folderData&&s.folderData.length&&s.fileData))return console.error("Invalid data format:",s),void alert("Received invalid data. Please check the server response.");am5.ready(function(){var e=am5.Root.new("comchartdiv1");e._logo.dispose(),e.setThemes([am5themes_Animated.new(e)]);var a=e.container.children.push(am5xy.XYChart.new(e,{panX:!1,panY:!1,wheelX:"none",wheelY:"none",pinchZoomX:!1,paddingLeft:0,layout:e.verticalLayout})),r=a.yAxes.push(am5xy.CategoryAxis.new(e,{categoryField:"category",renderer:am5xy.AxisRendererY.new(e,{inversed:!0,cellStartLocation:.1,cellEndLocation:.9,minorGridEnabled:!0})}));r.get("renderer").grid.template.setAll({strokeDasharray:[4,4]});var t=Math.max(Number(s.folderData[0].main_folder_count),Number(s.fileData.latest_files_count),Number(s.fileData.non_expired),Number(s.fileData.expired),Number(s.fileData.nearly_expired_30_days),Number(s.fileData.nearly_expired_60_days),Number(s.fileData.nearly_expired_90_days)),o=a.xAxes.push(am5xy.ValueAxis.new(e,{renderer:am5xy.AxisRendererX.new(e,{strokeOpacity:.1,minGridDistance:50}),min:0,max:100<t?t:100}));o.get("renderer").grid.template.setAll({strokeDasharray:[4,4]});var l=[{category:"Folders",value:Number(s.folderData[0].main_folder_count)},{category:"Documents",value:Number(s.fileData.latest_files_count)},{category:"Non Expired",value:0===Number(s.fileData.non_expired)?100:Number(s.fileData.non_expired)},{category:"Expired",value:0===Number(s.fileData.expired)?100:Number(s.fileData.expired)},{category:"Nearly Expired 30 Days",value:0===Number(s.fileData.nearly_expired_30_days)?100:Number(s.fileData.nearly_expired_30_days)},{category:"Nearly Expired 60 Days",value:0===Number(s.fileData.nearly_expired_60_days)?100:Number(s.fileData.nearly_expired_60_days)},{category:"Nearly Expired 90 Days",value:0===Number(s.fileData.nearly_expired_90_days)?100:Number(s.fileData.nearly_expired_90_days)}];r.data.setAll(l);var n=a.series.push(am5xy.ColumnSeries.new(e,{xAxis:o,yAxis:r,valueXField:"value",categoryYField:"category",sequencedInterpolation:!0,tooltip:am5.Tooltip.new(e,{pointerOrientation:"horizontal",getFillFromSprite:!1,autoTextColor:!1,label:{fill:am5.color(16777215)},background:am5.Rectangle.new(e,{fill:am5.color(0),fillOpacity:.7})})}));n.columns.template.setAll({height:am5.p100,strokeOpacity:0}),n.columns.template.adapters.add("tooltipText",function(e,a){var r=a.dataItem;return r?100===r.get("valueX")?"[bold]{name}[/]\n{category}: {valueX}%":"[bold]{name}[/]\n{category}: {valueX}":e}),n.columns.template.adapters.add("fill",function(e,a){var r=a.dataItem;if(r){var t=r.get("categoryY"),o=r.get("valueX");if(100===o)return am5.color(2263842);switch(t){case"Folders":return am5.color(16776960);case"Documents":return am5.color(16753920);case"Non Expired":return am5.color(2263842);case"Nearly Expired 30 Days":return am5.color(15616811);case"Nearly Expired 60 Days":return am5.color(16735324);case"Nearly Expired 90 Days":return am5.color(16747146);case"Expired":return 100===o?am5.color(2263842):am5.color(16711680);default:return am5.color(0)}}return e}),n.bullets.push(function(e,a,r){var t=r.get("valueX"),o=!(t<15),l=r.get("categoryY");["Nearly Expired 30 Days","Nearly Expired 60 Days","Nearly Expired 90 Days"].includes(l);return am5.Bullet.new(e,{locationX:o?.5:1.05,locationY:.5,sprite:am5.Label.new(e,{centerX:o?am5.p50:am5.p0,centerY:am5.p50,text:100===t?"{valueX}%":"{valueX}",fill:am5.color(16777215),populateText:!0})})}),n.data.setAll(l),n.appear();var i=a.children.push(am5.Legend.new(e,{centerX:am5.p50,x:am5.p50}));i.data.setAll([{name:"Folders",fill:am5.color(16776960)},{name:"Documents",fill:am5.color(16753920)},{name:"Non Expired",fill:am5.color(2263842)},{name:"Expired",fill:am5.color(16711680)},{name:"Nearly Expired 30 Days",fill:am5.color(15616811)},{name:"Nearly Expired 60 Days",fill:am5.color(16735324)},{name:"Nearly Expired 90 Days",fill:am5.color(16747146)}]);var c=a.set("cursor",am5xy.XYCursor.new(e,{behavior:"none"}));function d(){window.innerWidth<600?i.set("layout",e.verticalLayout):i.set("layout",e.horizontalLayout)}c.lineY.set("forceHidden",!0),c.lineX.set("forceHidden",!0),a.appear(1e3,100),window.addEventListener("resize",function(){d(),a.appear(0,0)}),d()})}).catch(function(e){console.error("Error fetching data:",e),alert("Failed to fetch compliance data. Please try again later.")})}),$.ajax({url:"ChartIQ/compliance_non_data.php",method:"GET",dataType:"json",success:function(o){am5.ready(function(){var e=am5.Root.new("chartdiv4");e.setThemes([am5themes_Animated.new(e)]);var a=e.container.children.push(am5percent.PieChart.new(e,{layout:e.verticalLayout})),r=a.series.push(am5percent.PieSeries.new(e,{valueField:"value",categoryField:"category"})),t=[];t=0<o.compliantPercentage||0<o.nonCompliantPercentage?[{category:"Compliance",value:o.compliantPercentage},{category:"Non-Compliance",value:o.nonCompliantPercentage}]:[{category:"No Data",value:1}],r.data.setAll(t),r.slices.each(function(e){"Compliance"===e.dataItem.dataContext.category?(e.set("fill",am5.color(6094684)),e.set("stroke",am5.color(6094684))):"Non-Compliance"===e.dataItem.dataContext.category?(e.set("fill",am5.color(16711680)),e.set("stroke",am5.color(16711680))):(e.set("fill",am5.color(13421772)),e.set("stroke",am5.color(13421772)))}),a.children.push(am5.Legend.new(e,{centerX:am5.percent(50),x:am5.percent(50),layout:e.horizontalLayout})).data.setAll(r.dataItems)})},error:function(e,a,r){console.error("AJAX request failed:",a,r)}}),$(document).ready(function(){$.ajax({url:"ChartIQ/annual_review_data.php",type:"GET",dataType:"json",success:function(e){var r=e.review_percentage;am5.ready(function(){var e=am5.Root.new("chartdiv3");e.setThemes([am5themes_Animated.new(e)]);var a=e.container.children.push(am5percent.PieChart.new(e,{endAngle:270})).series.push(am5percent.PieSeries.new(e,{valueField:"value",categoryField:"category",endAngle:270}));a.data.setAll([{category:"Annual Review",value:r},{category:"Remaining",value:100-r}]),e.container.children.push(am5.Legend.new(e,{centerX:am5.percent(50),x:am5.percent(50),centerY:am5.percent(100),y:am5.percent(100),layout:e.horizontalLayout})).data.setAll(a.dataItems),a.appear(1e3,100)})},error:function(e,a,r){console.error("Error fetching data:",r)}})});
//# sourceMappingURL=compliance_chart.min.js.map
