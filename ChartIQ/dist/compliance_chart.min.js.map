{"version":3,"sources":["compliance_chart.js"],"names":["document","addEventListener","fetch","response","json","then","data","folderData","length","fileData","error","console","alert","am5","ready","root","Root","_logo","dispose","setThemes","am5themes_Animated","chart","container","children","push","am5xy","XYChart","panX","panY","wheelX","wheelY","pinchZoomX","paddingTop","verticalLayout","layout","set","ColorSet","colors","AxisRendererX","color","template","setAll","grid","xRenderer","strokeDasharray","minorGridEnabled","categoryField","yRenderer","AxisRendererY","yAxis","labels","forceHidden","labelText","xAxis","xAxes","CategoryAxis","renderer","tooltip","shadowOpacity","yAxes","ValueAxis","shadowOffsetX","shadowOffsetY","series","ColumnSeries","name","cornerRadiusTL","cornerRadiusTR","undefined","categoryXField","Tooltip","states","columns","tooltipY","tooltipText","adapters","getIndex","shadowBlur","Number","stroke","shadowColor","latest_files_count","fill","create","nearly_expired_30_days","nearly_expired_60_days","target","get","indexOf","chartData","value","main_folder_count","Legend","non_expired","p50","expired","category","percent","gridLayout","legend","unshift","x","y","appear","handleResize","window","innerWidth","horizontalLayout","dataItems","text","maxWidth","paddingLeft","inversed","cellEndLocation","strokeOpacity","minGridDistance","cellStartLocation","nearly_expired_90_days","max","sequencedInterpolation","pointerOrientation","p100","dataItem","valueXField","categoryYField","height","add","includes","bullets","Bullet","locationX","locationY","sprite","Label","centerY","populateText","centerX","cursor","XYCursor","behavior","lineX","lineY"],"mappings":"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","file":"compliance_chart.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    fetch('ChartIQ/compliance_data.php')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (!data || !data.folderData || !data.folderData.length || !data.fileData) {\r\n                console.error('Invalid data format:', data);\r\n                alert('Received invalid data. Please check the server response.');\r\n                return;\r\n            }\r\n\r\n            am5.ready(function() {\r\n                var root = am5.Root.new(\"comchartdiv\");\r\n\r\n                 // Remove amCharts logo\r\n                 root._logo.dispose();\r\n\r\n                root.setThemes([am5themes_Animated.new(root)]);\r\n              \r\n\r\n                var chart = root.container.children.push(am5xy.XYChart.new(root, {\r\n                    panX: false,\r\n                    panY: false,\r\n                    wheelX: \"none\",\r\n                    wheelY: \"none\",\r\n                    pinchZoomX: false,\r\n                    paddingTop: 50,\r\n                    layout: root.verticalLayout\r\n                }));\r\n\r\n                chart.set(\"colors\", am5.ColorSet.new(root, {\r\n                    colors: [\r\n                        am5.color(0xFFFF00),\r\n                        am5.color(0xFFA500),\r\n                        am5.color(0x228B22), \r\n                        am5.color(0xFF0000),\r\n                        am5.color(0xEE4B2B),\r\n                        am5.color(0xFF5C5C),\r\n                        am5.color(0xFF8A8A)\r\n                    ]\r\n                }));\r\n\r\n                var xRenderer = am5xy.AxisRendererX.new(root, {\r\n                    minGridDistance: 50,\r\n                    minorGridEnabled: true\r\n                });\r\n\r\n                xRenderer.grid.template.setAll({\r\n                    location: 1,\r\n                    strokeDasharray: [5, 5]\r\n                });\r\n\r\n                var yRenderer = am5xy.AxisRendererY.new(root, {\r\n                    strokeOpacity: 0.1\r\n                });\r\n\r\n                yRenderer.grid.template.setAll({\r\n                    strokeDasharray: [5, 5]\r\n                });\r\n\r\n                xRenderer.labels.template.setAll({\r\n                    forceHidden: true\r\n                });\r\n\r\n                var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {\r\n                    categoryField: \"category\",\r\n                    renderer: xRenderer,\r\n                    tooltip: am5.Tooltip.new(root, {})\r\n                }));\r\n\r\n                var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {\r\n                    min: 0,\r\n                    renderer: yRenderer\r\n                }));\r\n\r\n                var series = chart.series.push(am5xy.ColumnSeries.new(root, {\r\n                    name: \"Series 1\",\r\n                    xAxis: xAxis,\r\n                    yAxis: yAxis,\r\n                    valueYField: \"value\",\r\n                    categoryXField: \"category\",\r\n                    tooltip: am5.Tooltip.new(root, {\r\n                        labelText: \"{category}: {valueY}\"\r\n                    }),\r\n                }));\r\n\r\n                series.columns.template.setAll({\r\n                    tooltipY: 0,\r\n                    tooltipText: \"{category}: {valueY}\",\r\n                    shadowOpacity: 0.1,\r\n                    shadowOffsetX: 2,\r\n                    shadowOffsetY: 2,\r\n                    shadowBlur: 1,\r\n                    strokeWidth: 2,\r\n                    stroke: am5.color(0xffffff),\r\n                    shadowColor: am5.color(0x000000),\r\n                    cornerRadiusTL: 50,\r\n                    cornerRadiusTR: 50,\r\n                    fill: undefined,\r\n                    fillOpacity: 1\r\n                });\r\n\r\n                series.columns.template.states.create(\"hover\", {\r\n                    shadowOpacity: 1,\r\n                    shadowBlur: 10,\r\n                    cornerRadiusTL: 10,\r\n                    cornerRadiusTR: 10\r\n                });\r\n\r\n                series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n                    return chart.get(\"colors\").getIndex(series.columns.indexOf(target));\r\n                });\r\n\r\n                var chartData = [\r\n                    { category: \"Folders\", value: Number(data.folderData[0].main_folder_count) },\r\n                    { category: \"Files\", value: Number(data.fileData.latest_files_count) },\r\n                    { category: \"Non Expired\", value: Number(data.fileData.non_expired) }, // Add non-expired count\r\n                    { category: \"Expired\", value: Number(data.fileData.expired) },\r\n                    { category: \"Nearly Expired 30 Days\", value: Number(data.fileData.nearly_expired_30_days) },\r\n                    { category: \"Nearly Expired 60 Days\", value: Number(data.fileData.nearly_expired_60_days) },\r\n                    { category: \"Nearly Expired 90 Days\", value: Number(data.fileData.nearly_expired_90_days) }\r\n                ];\r\n\r\n                xAxis.data.setAll(chartData);\r\n                series.data.setAll(chartData);\r\n\r\n                var legend = chart.children.unshift(am5.Legend.new(root, {\r\n                    centerX: am5.p50,\r\n                    x: am5.p50,\r\n                    y: am5.percent(-4),\r\n                    layout: root.gridLayout\r\n                }));\r\n\r\n                legend.data.setAll(series.dataItems);\r\n\r\n                legend.labels.template.setAll({\r\n                    text: \"{category}: {valueY}\",\r\n                    maxWidth: 120,\r\n                    wrap: true,\r\n                    fill: am5.color(0x000000)\r\n                });\r\n\r\n                legend.set(\"width\", am5.percent(100)); \r\n                legend.set(\"fixedWidthGrid\", true); \r\n\r\n                series.appear(1000);\r\n                chart.appear(1000, 100);\r\n\r\n                // Handle window resize\r\n                function handleResize() {\r\n                    if (window.innerWidth < 600) {\r\n                        legend.set(\"layout\", root.verticalLayout);\r\n                        legend.set(\"y\", am5.percent(0));\r\n                    } else if (window.innerWidth < 1024) {\r\n                        legend.set(\"layout\", root.horizontalLayout);\r\n                        legend.set(\"y\", am5.percent(2));\r\n                    } else {\r\n                        legend.set(\"layout\", root.gridLayout);\r\n                        legend.set(\"y\", am5.percent(-4));\r\n                    }\r\n                }\r\n\r\n                window.addEventListener('resize', function() {\r\n                    handleResize();\r\n                    chart.appear(0, 0);\r\n                });\r\n\r\n                handleResize(); \r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching data:', error);\r\n            alert('Failed to fetch compliance data. Please try again later.');\r\n        });\r\n});\r\n\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    fetch('ChartIQ/compliance_data.php')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if (!data || !data.folderData || !data.folderData.length || !data.fileData) {\r\n                console.error('Invalid data format:', data);\r\n                alert('Received invalid data. Please check the server response.');\r\n                return;\r\n            }\r\n\r\n            am5.ready(function() {\r\n                \r\n                var root = am5.Root.new(\"comchartdiv1\");\r\n\r\n                \r\n                root._logo.dispose();\r\n\r\n              \r\n                root.setThemes([\r\n                    am5themes_Animated.new(root)\r\n                ]);\r\n\r\n                // Create chart\r\n                var chart = root.container.children.push(am5xy.XYChart.new(root, {\r\n                    panX: false,\r\n                    panY: false,\r\n                    wheelX: \"none\",\r\n                    wheelY: \"none\",\r\n                    pinchZoomX: false,\r\n                    paddingLeft: 0,\r\n                    layout: root.verticalLayout\r\n                }));\r\n\r\n                // Create axes\r\n                var yAxis = chart.yAxes.push(am5xy.CategoryAxis.new(root, {\r\n                    categoryField: \"category\",\r\n                    renderer: am5xy.AxisRendererY.new(root, {\r\n                        inversed: true,\r\n                        cellStartLocation: 0.1,\r\n                        cellEndLocation: 0.9,\r\n                        minorGridEnabled: true\r\n                    })\r\n                }));\r\n\r\n                var xAxis = chart.xAxes.push(am5xy.ValueAxis.new(root, {\r\n                    renderer: am5xy.AxisRendererX.new(root, {\r\n                        strokeOpacity: 0.1,\r\n                        minGridDistance: 50\r\n                    }),\r\n                    min: 0,\r\n                    max: 100 \r\n                }));\r\n\r\n                // Data\r\n                var chartData = [\r\n                    { category: \"Folders\", value: Number(data.folderData[0].main_folder_count) },\r\n                    { category: \"Files\", value: Number(data.fileData.latest_files_count) },\r\n                    { category: \"Non Expired\", value: Number(data.fileData.non_expired) === 0 ? 100 : Number(data.fileData.non_expired) },\r\n                    { category: \"Expired\", value: Number(data.fileData.expired) === 0 ? 100 : Number(data.fileData.expired) },\r\n                    { category: \"Nearly Expired 30 Days\", value: Number(data.fileData.nearly_expired_30_days) === 0 ? 100 : Number(data.fileData.nearly_expired_30_days) },\r\n                    { category: \"Nearly Expired 60 Days\", value: Number(data.fileData.nearly_expired_60_days) === 0 ? 100 : Number(data.fileData.nearly_expired_60_days) },\r\n                    { category: \"Nearly Expired 90 Days\", value: Number(data.fileData.nearly_expired_90_days) === 0 ? 100 : Number(data.fileData.nearly_expired_90_days) }\r\n                ];\r\n\r\n                yAxis.data.setAll(chartData);\r\n\r\n                // Add series\r\n                var series = chart.series.push(am5xy.ColumnSeries.new(root, {\r\n                    xAxis: xAxis,\r\n                    yAxis: yAxis,\r\n                    valueXField: \"value\",\r\n                    categoryYField: \"category\",\r\n                    sequencedInterpolation: true,\r\n                    tooltip: am5.Tooltip.new(root, {\r\n                        pointerOrientation: \"horizontal\",\r\n                        labelText: \"[bold]{name}[/]\\n{category}: {valueX}%\"\r\n                    })\r\n                }));\r\n\r\n                series.columns.template.setAll({\r\n                    height: am5.p100,\r\n                    strokeOpacity: 0\r\n                });\r\n\r\n                series.columns.template.adapters.add(\"fill\", function(fill, target) {\r\n                    var dataItem = target.dataItem;\r\n                    if (dataItem) {\r\n                        var category = dataItem.get(\"categoryY\");\r\n                        var value = dataItem.get(\"valueX\");\r\n                        if (value === 100 && [\"Non Expired\", \"Expired\", \"Nearly Expired 30 Days\", \"Nearly Expired 60 Days\", \"Nearly Expired 90 Days\"].includes(category)) {\r\n                            return am5.color(0x228B22); \r\n                        } else {\r\n                            switch (category) {\r\n                                case \"Folders\":\r\n                                    return am5.color(0xFFFF00);\r\n                                case \"Files\":\r\n                                    return am5.color(0xFFA500);\r\n                                case \"Non Expired\":\r\n                                    return am5.color(0x228B22);\r\n                                case \"Expired\":\r\n                                    return am5.color(0xFF0000);\r\n                                case \"Nearly Expired 30 Days\":\r\n                                    return am5.color(0xEE4B2B);\r\n                                case \"Nearly Expired 60 Days\":\r\n                                    return am5.color(0xFF5C5C);\r\n                                case \"Nearly Expired 90 Days\":\r\n                                    return am5.color(0xFF8A8A);\r\n                                default:\r\n                                    return am5.color(0x000000);\r\n                            }\r\n                        }\r\n                    }\r\n                    return fill;\r\n                });\r\n\r\n                series.bullets.push(function(root, series, dataItem) {\r\n                    return am5.Bullet.new(root, {\r\n                        locationX: 1,\r\n                        locationY: 0.5,\r\n                        sprite: am5.Label.new(root, {\r\n                            centerX: am5.p100,\r\n                            centerY: am5.p50,\r\n                            text: dataItem.get(\"valueX\") + \"%\",\r\n                            fill: am5.color(0xffffff),\r\n                            populateText: true\r\n                        })\r\n                    });\r\n                });\r\n\r\n                series.data.setAll(chartData);\r\n                series.appear();\r\n\r\n                // Add legend\r\n                var legend = chart.children.push(am5.Legend.new(root, {\r\n                    centerX: am5.p50,\r\n                    x: am5.p50\r\n                }));\r\n\r\n                // Add legend items manually\r\n                legend.data.setAll([\r\n                    { name: \"Folders\", fill: am5.color(0xFFFF00) },\r\n                    { name: \"Files\", fill: am5.color(0xFFA500) },\r\n                    { name: \"Non Expired\", fill: am5.color(0x228B22) },\r\n                    { name: \"Expired\", fill: am5.color(0xFF0000) },\r\n                    { name: \"Nearly Expired 30 Days\", fill: am5.color(0xEE4B2B) },\r\n                    { name: \"Nearly Expired 60 Days\", fill: am5.color(0xFF5C5C) },\r\n                    { name: \"Nearly Expired 90 Days\", fill: am5.color(0xFF8A8A) }\r\n                ]);\r\n\r\n                // Add cursor\r\n                var cursor = chart.set(\"cursor\", am5xy.XYCursor.new(root, {\r\n                    behavior: \"none\" // No zooming on scroll\r\n                }));\r\n                cursor.lineY.set(\"forceHidden\", true);\r\n                cursor.lineX.set(\"forceHidden\", true);\r\n\r\n                // Make stuff animate on load\r\n                chart.appear(1000, 100);\r\n\r\n                // Handle window resize\r\n                function handleResize() {\r\n                    if (window.innerWidth < 600) {\r\n                        legend.set(\"layout\", root.verticalLayout);\r\n                    } else {\r\n                        legend.set(\"layout\", root.horizontalLayout);\r\n                    }\r\n                }\r\n\r\n                window.addEventListener('resize', function() {\r\n                    handleResize();\r\n                    chart.appear(0, 0);\r\n                });\r\n\r\n                handleResize(); // Initial call to set the correct layout\r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error fetching data:', error);\r\n            alert('Failed to fetch compliance data. Please try again later.');\r\n        });\r\n});\r\n\r\n\r\n"]}